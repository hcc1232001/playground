{"version":3,"sources":["media/models/190717_frying pan animationA_flip.fbx","media/models/190717_frying pan animationB_shake.fbx","media/models/190717_frying pan animationB_flip.fbx","media/models/190717_frying pan animationC_shake.fbx","media/models/190717_frying pan animationC_flip.fbx","App.js","index.js","globals/config.js","pages/fbxViewer.js","utils/vendor/shaders/CopyShader.js","utils/vendor/postprocessing/Pass.js","utils/vendor/postprocessing/ShaderPass.js","utils/vendor/postprocessing/MaskPass.js","utils/vendor/postprocessing/EffectComposer.js","utils/vendor/postprocessing/RenderPass.js","utils/vendor/shaders/SAOShader.js","utils/vendor/shaders/DepthLimitedBlurShader.js","utils/vendor/shaders/UnpackDepthRGBAShader.js","utils/vendor/postprocessing/SAOPass.js","pages/kitchenViewer.js","media/models/190717_frying pan animationA_shake.fbx","pages/indexPage.js","pages/touchTableViewer.js","pages/animatingLines.js","pages/svgAnimator.js","components/touchTableInstance.js","pages/touchTable.js","pages/homePage.js","components/useDeviceMotion.js","pages/joinGame.js","utils/vendor/orbitControls.js","components/fbxModelsLoader.js","pages/createGame.js","globals/routes.js","media/models/190715_CLP_game(8).fbx","media/textures/meat.png","media/textures/mid_meat.png","media/textures/welldone_meat.png","media/sound/click.mp3","pages lazy /^/.*$/ groupOptions: {} namespace object"],"names":["module","exports","__webpack_require__","p","templates","joinGame","JoinGame","homePage","HomePage","fbxViewer","FbxViewer","kitchenViewer","KitchenViewer","indexPage","IndexPage","touchTableViewer","TouchTableViewer","touchTable","TouchTable","animatingLines","AnimatingLines","svgAnimator","SvgAnimator","getRenderPropForRoute","pageId","AppComponent","match","react_default","a","createElement","App","react_router_dom","react_router","path","routes","render","to","ReactDOM","hydrate","src_App_0","document","getElementById","d","__webpack_exports__","serverPath","serverPort","FBXLoader","require","props","_useState","useState","scene","camera","containerEl","renderer","orbitControl","raycaster","clock","mixer","_useState2","Object","D_Documents_Projects_React_playground_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","threeObjects","setThreeObjects","_useState3","_useState4","cameraPosition","setCameraPosition","fbxName","useParams","animationFrame","onResize","aspect","offsetWidth","offsetHeight","updateProjectionMatrix","setSize","useEffect","THREE","background","position","set","lookAt","al","add","pl1","pl2","pl3","pl4","directionalLight","castShadow","shadow","near","far","top","bottom","left","right","mapSize","width","height","antialias","setPixelRatio","window","devicePixelRatio","setClearColor","appendChild","domElement","shadowMap","enabled","type","OrbitControls","maxDistance","loader","load","concat","object","action","animations","length","clipAction","play","cameraOfFbx","getObjectByName","x","y","z","i","charCodeAt","currentChar","String","fromCharCode","videoElement","video","oncanplay","muted","loop","autoplay","src","texture","minFilter","magFilter","format","material","map","addShadowToChild","traverse","child","isMesh","scale","receiveShadow","prevThreeObjects","D_Documents_Projects_React_playground_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","item","console","log","loaded","total","err","initScene","addEventListener","removeEventListener","clearTimeout","setTimeout","update","react__WEBPACK_IMPORTED_MODULE_2___default","ref","className","style","onClick","reset","CopyShader","uniforms","tDiffuse","value","opacity","vertexShader","join","fragmentShader","Pass","this","needsSwap","clear","renderToScreen","assign","prototype","error","FullScreenQuad","OrthographicCamera","geometry","PlaneBufferGeometry","_mesh","Mesh","defineProperty","get","ShaderPass","shader","textureID","call","undefined","ShaderMaterial","UniformsUtils","clone","defines","fsQuad","create","constructor","writeBuffer","readBuffer","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","MaskPass","inverse","writeValue","clearValue","context","state","buffers","color","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget","parameters","LinearFilter","RGBAFormat","stencilBuffer","size","getSize","Vector2","_pixelRatio","getPixelRatio","_width","_height","WebGLRenderTarget","name","renderTarget1","renderTarget2","passes","copyPass","Clock","swapBuffers","tmp","addPass","pass","push","getDrawingBufferSize","insertPass","index","splice","isLastEnabledPass","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","stencilFunc","NOTEQUAL","dispose","effectiveWidth","effectiveHeight","pixelRatio","RenderPass","overrideMaterial","clearColor","clearAlpha","clearDepth","oldClearColor","oldClearAlpha","oldAutoClear","autoClear","getClearColor","getHex","getClearAlpha","SAOShader","NUM_SAMPLES","NUM_RINGS","NORMAL_TEXTURE","DIFFUSE_TEXTURE","DEPTH_PACKING","PERSPECTIVE_CAMERA","tDepth","tNormal","cameraNear","cameraFar","cameraProjectionMatrix","Matrix4","cameraInverseProjectionMatrix","intensity","bias","minResolution","kernelRadius","randomSeed","DepthLimitedBlurShader","KERNEL_RADIUS","sampleUvOffsets","sampleWeights","depthCutoff","BlurShaderUtils","createSampleWeights","stdDev","gaussian","Math","exp","sqrt","PI","weights","createSampleOffsets","uvIncrement","offsets","multiplyScalar","configure","needsUpdate","UnpackDepthRGBAShader","SAOPass","depthTexture","useNormals","resolution","supportsDepthTextureExtension","supportsNormalTexture","originalClearColor","Color","params","output","saoBias","saoIntensity","saoScale","saoKernelRadius","saoMinResolution","saoBlur","saoBlurRadius","saoBlurStdDev","saoBlurDepthCutoff","saoRenderTarget","blurIntermediateRenderTarget","beautyRenderTarget","normalRenderTarget","NearestFilter","depthRenderTarget","DepthTexture","UnsignedShortType","maxFilter","depthBuffer","depthMaterial","MeshDepthMaterial","depthPacking","RGBADepthPacking","blending","NoBlending","normalMaterial","MeshNormalMaterial","saoMaterial","extensions","derivatives","isPerspectiveCamera","getInverse","projectionMatrix","vBlurMaterial","hBlurMaterial","materialCopy","transparent","depthTest","depthWrite","CustomBlending","blendSrc","DstColorFactor","blendDst","ZeroFactor","blendEquation","AddEquation","blendSrcAlpha","DstAlphaFactor","blendDstAlpha","blendEquationAlpha","depthCopy","OUTPUT","Beauty","Default","SAO","Depth","Normal","renderPass","copy","floor","prevStdDev","prevNumSamples","renderOverride","outputMaterial","passMaterial","originalClearAlpha","originalAutoClear","setClearAlpha","executeCrossFade","startAction","endAction","duration","setEffectiveTimeScale","setEffectiveWeight","time","crossFadeTo","_ref","_ref$enableSAOPass","enableSAOPass","slicedToArray","pansAnimation","setPansAnimation","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","roomLoaded","setRoomLoaded","_useState11","_useState12","setTextureLoaded","_useState13","innerWidth","innerHeight","_useState14","_useState15","Date","now","_useState16","loadPans","progressCallback","pans","pansNameMapping","panName","tracksRename","Meat_A__Copy_.position","Meat_A__Copy_.quaternion","frying_pan_A_2.position","frying_pan_A_2.quaternion","Meat_B__Copy_.position","Meat_B__Copy_.quaternion","frying_pan_B_2.position","frying_pan_B_2.quaternion","Meat_C__Copy_.position","Meat_C__Copy_.quaternion","frying_pan_C_2.position","frying_pan_C_2.quaternion","mixersArray","progressArray","Array","fill","onProgress","totalProgressPercent","reduce","c","forEach","pan","idx","currentPan","panObject","children","find","shakePromise","Promise","resolve","reject","track","shake","flipPromise","flip","all","then","results","actions","objectSpread2","event","pansLoader","result","requestAnimationFrame","delta","composer","useTarget","target","fbxUrl","isPointLight","isDirectionalLight","isCamera","filter","obj","startsWith","panObj","panMesh","toLowerCase","endsWith","textureLoader","meatTextures","meatUrl","mildMeatUrl","welldoneMeatUrl","saoPass","cancelAnimationFrame","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","globals_routes__WEBPACK_IMPORTED_MODULE_2__","D_Documents_Projects_React_playground_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","targetWinSize","setTargetWinSize","winSize","setWinSize","winScale","setWinScale","min","react__WEBPACK_IMPORTED_MODULE_1___default","overflow","transform","transformOrigin","border","transition","zIndex","cursor","prevTargerWinSize","svgEl","setSvgEl","elList","setElList","clickedEl","setClickedEl","clickedElInfo","setClickedElInfo","svgStr","setSvgStr","htmlEl","querySelector","dragoverHandler","dropHandler","e","preventDefault","stopPropagation","file","dataTransfer","items","kind","getAsFile","files","reader","FileReader","readAsBinaryString","onloadend","ElListWithSelector","ElList","querySelectorAll","svgOnClick","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","el","getBBox","elOnClick","boundBox","selector","finder","root","data","element","return","currentTarget","selectorStr","classList","parentNode","body","elementInfo","getComputedStyle","getAttribute","animation","animationEls","from","animationEl","animationAttrs","calcMode","values","keySplines","repeatCount","dur","begin","remove","id","getBoundingClientRect","pointerEvents","split","replace","dangerouslySetInnerHTML","__html","onChange","selected","key","tagName","readOnly","animationData","viewBox","stroke","vectorEffect","strokeWidth","TouchTableInstance","setScale","scalingFactor","setScalingFactor","currentRotate","angle","setAngle","rotatingAngle","setRotatingAngle","currentXY","setCurrentXY","previousXY","setPreviousXY","enablePan","useRef","aniScale","TweenMax","ease","Back","easeOut","onUpdate","onComplete","react_hammerjs_es","onPinch","newScale","max","deltaX","deltaY","onPinchEnd","onRotateStart","rotation","onRotateMove","onPanStart","contains","offsetParent","current","onPan","onPanEnd","options","recognizers","pinch","enable","rotate","threshold","easeIn","closeFunc","instances","setInstances","audioInstance","Audio","clickSound","playClickSound","removeInstance","instance","prevInstance","instanceIndex","indexOf","slice","onPress","containerWidth","containerHeight","instanceRotated","rotateAngleX","atan","rotateAngleY","rotatedPositionX","center","cos","sin","rotatedPositionY","instanceWidth","instanceHeight","instanceX","instanceY","abs","newInstance","components_touchTableInstance","toConsumableArray","onMouseMove","socket","setSocket","playersInfo","setPlayersInfo","serverUrl","io","on","emit","_loop","playerIdx","playerInfo","joinGamePath","location","origin","pathname","generatePath","userId","QRCode","toDataURL","dark","light","margin","url","prevPlayersInfo","newPlayerInfo","img","msg","joined","href","rel","alt","shakeCount","UseDeviceMotion","setThreshold","lastAccVec3","setLastAccVec3","moveCounter","setMoveCounter","onMotion","useCallback","alpha","beta","gamma","deltaZ","prevMoveCounter","onShake","STATUS","freeze","CONNECTING","IDLE","SHAKING","ENDGAME","INVALID","statusDisplay","setStatusDisplay","lastShakeTime","joinStatus","status","useDeviceMotion","Vector3","minDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","dispatchEvent","changeEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","radius","panOffset","setFromSpherical","zoomChanged","distanceToSquared","EPS","dot","quaternion","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","clientWidth","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","clientX","clientY","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","EventDispatcher","defineProperties","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","default","fbxModelsLoader","modelsUrlArray","modelLoadingArray","modelUrl","clampWhenFinished","CreateGame","loadedModels","setLoadedModels","fbxModels","loadModels","models","fbxViewerOfName","./animatingLines","./animatingLines.js","./createGame","./createGame.js","./custom-inputbox.css","./fbxViewer","./fbxViewer.css","./fbxViewer.js","./homePage","./homePage.css","./homePage.js","./indexPage","./indexPage.js","./joinGame","./joinGame.js","./kitchenViewer","./kitchenViewer.css","./kitchenViewer.js","./svgAnimator","./svgAnimator.css","./svgAnimator.js","./touchTable","./touchTable.css","./touchTable.js","./touchTableViewer","./touchTableViewer.js","webpackAsyncContext","req","o","Error","code","ids","t"],"mappings":"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","file":"static/js/main.577f8d7f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationA_flip.76c68fdb.fbx\";","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationB_shake.39143745.fbx\";","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationB_flip.73bcd93e.fbx\";","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationC_shake.642bef3e.fbx\";","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationC_flip.e5174b4e.fbx\";","import React from 'react';\nimport {HashRouter, BrowserRouter, Switch, Route, Redirect} from 'react-router-dom';\nimport asyncLoadingPage from 'components/asyncLoadingComponent.js';\nimport routes from 'globals/routes';\n// import logo from './logo.svg';\nimport './App.css';\n\nimport JoinGame from 'pages/joinGame';\nimport HomePage from 'pages/homePage';\nimport FbxViewer from 'pages/fbxViewer';\nimport KitchenViewer from 'pages/kitchenViewer';\nimport IndexPage from 'pages/indexPage';\nimport TouchTableViewer from 'pages/touchTableViewer';\nimport TouchTable from 'pages/touchTable';\nimport AnimatingLines from 'pages/animatingLines';\nimport SvgAnimator from 'pages/svgAnimator';\n\nconst templates = {\n  joinGame: JoinGame,\n  homePage: HomePage,\n  fbxViewer: FbxViewer,\n  kitchenViewer: KitchenViewer,\n  indexPage: IndexPage,\n  touchTableViewer: TouchTableViewer,\n  touchTable: TouchTable,\n  animatingLines: AnimatingLines,\n  svgAnimator: SvgAnimator,\n};\n\nconst getRenderPropForRoute = (pageId) => {\n  // const AppComponent = asyncLoadingPage(pageId);\n  const AppComponent = templates[pageId];\n  return (match) => { return (<AppComponent match={match} />) };\n  \n}\n\nconst App = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route path={routes.joinGame} render={getRenderPropForRoute('joinGame')} />\n        {/* <Route path={routes.createGame} render={getRenderPropForRoute('createGame')} /> */}\n        <Route path={routes.homePage} render={getRenderPropForRoute('homePage')} />\n        {/* <Route path={routes.fbxViewerOfName} render={getRenderPropForRoute('fbxViewer')} /> */}\n        {/* <Route path={routes.kitchenViewer} render={getRenderPropForRoute('kitchenViewer')} /> */}\n        {/* <Route path={routes.indexPage} render={getRenderPropForRoute('indexPage')} /> */}\n        {/* <Route path={routes.touchTableViewer} render={getRenderPropForRoute('touchTableViewer')} /> */}\n        {/* <Route path={routes.touchTable} render={getRenderPropForRoute('touchTable')} /> */}\n        {/* <Route path={routes.animatingLines} render={getRenderPropForRoute('animatingLines')} /> */}\n        {/* <Route path={routes.svgAnimator} render={getRenderPropForRoute('svgAnimator')} /> */}\n        <Redirect to={routes.homePage} />\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import ReactDOMServer from 'react-dom/server';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.hydrate(<App />, document.getElementById('main'));\n\n\n// console.log(ReactDOMServer.renderToString(<App />));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n// serviceWorker.register();\n","const serverPath = 'https://socketio-testing.herokuapp.com';\r\nconst serverPort = 443;\r\n// const serverPath = '//10.0.1.9';\r\n// const serverPort = 3000;\r\nexport {\r\n  serverPath,\r\n  serverPort\r\n};","import React from 'react';\r\nimport {useState, useEffect} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport * as THREE from 'three';\r\nimport OrbitControls from 'utils/vendor/orbitControls';\r\n// import {FBXLoader} from 'utils/vendor/FBXLoader';\r\n\r\nimport './fbxViewer.css';\r\n// import fbxUrl from 'media/models/Windows for Building department breaking.fbx';\r\n// import fbxUrl from 'media/models/windows.fbx';\r\n// import fbxUrl from 'media/models/190717_frying pan animationA(2).fbx';\r\n\r\n// import fbxUrl from 'media/models/190715_CLP_game(7).fbx';\r\n\r\nconst FBXLoader = require('three-fbxloader-offical');\r\n\r\nconst addShadowToChild = (object, scene) => {\r\n  // let camera = null;\r\n  // console.log(object.type);\r\n  object.traverse( function ( child ) {\r\n    if (object !== child) {\r\n      addShadowToChild(child, scene);\r\n    }\r\n    if (child.isMesh && child.scale.x === 0 && child.scale.y === 0 && child.scale.z === 0) {\r\n      child.scale.x = 0.001;\r\n      child.scale.y = 0.001;\r\n      child.scale.z = 0.001;\r\n    }\r\n    child.castShadow = true;\r\n    child.receiveShadow = true;\r\n  });\r\n  // return camera;\r\n}\r\nconst App = (props) => {\r\n  const [threeObjects, setThreeObjects] = useState({\r\n    scene: null,\r\n    camera: null,\r\n    containerEl: null,\r\n    renderer: null,\r\n    orbitControl: null,\r\n    raycaster: null,\r\n    clock: null,\r\n    mixer: null,\r\n  });\r\n  const [cameraPosition, setCameraPosition] = useState([0, 0, 0]);\r\n  const { fbxName } = useParams();\r\n  let containerEl = null;\r\n  let animationFrame = null;\r\n  const cameraDefaultPosition = [\r\n    [500, 500, 250],\r\n    [500, 500, -250],\r\n    [500, -500, -250],\r\n    [500, -500, 250],\r\n  ]\r\n  const setContainerEl = (ref) => containerEl = ref;\r\n  const initScene = () => {\r\n    const scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(0x404040);\r\n    const camera = new THREE.PerspectiveCamera( 50, containerEl.offsetWidth / containerEl.offsetHeight, 0.1, 10000 );\r\n    camera.position.set(500, 500, 250);\r\n    camera.lookAt(0, 0, 0);\r\n    camera.updateProjectionMatrix();\r\n    \r\n    // const light = new THREE.DirectionalLight(0xFFFFFF, 1);\r\n    // light.position.set(50, 100, 100);\r\n    // scene.add(light);\r\n    const al = new THREE.AmbientLight(0x404040);\r\n    scene.add(al);\r\n    const pl1 = new THREE.DirectionalLight(0xFFFFFF, 0.12, 0.5, 2);\r\n    pl1.position.set(30.828, 9.431, 42.316);\r\n    scene.add(pl1);\r\n    const pl2 = new THREE.DirectionalLight(0xFFFFFF, 0.3, 0.5, 2);\r\n    pl2.position.set(30.611, 4.849, -24.751);\r\n    scene.add(pl2);\r\n    const pl3 = new THREE.DirectionalLight(0xFFFFFF, 0.28, 0.5, 2);\r\n    pl3.position.set(-30.237, 7.255, -48.423);\r\n    scene.add(pl3);\r\n    const pl4 = new THREE.DirectionalLight(0xFFFFFF, 0.22, 0.5, 2);\r\n    pl4.position.set(-13.893, 10.843, 39.919);\r\n    scene.add(pl4);\r\n\r\n          \r\n    const directionalLight = new THREE.DirectionalLight(0xFFFFFF, 0.7);\r\n    directionalLight.position.set(0, 100, 0);\r\n    directionalLight.castShadow = true;\r\n    directionalLight.shadow.camera.near = 0.5;    // default\r\n    directionalLight.shadow.camera.far = 50000;\r\n    directionalLight.shadow.camera.top = 2500;\r\n    directionalLight.shadow.camera.bottom = -2500;\r\n    directionalLight.shadow.camera.left = -2500;\r\n    directionalLight.shadow.camera.right = 2500;\r\n    directionalLight.shadow.mapSize.width = 1024;\r\n    directionalLight.shadow.mapSize.height = 1024;\r\n    scene.add(directionalLight);\r\n\r\n    const renderer = new THREE.WebGLRenderer( { antialias: true } );\r\n    renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize( containerEl.offsetWidth, containerEl.offsetHeight );\r\n    renderer.setClearColor( 0xcccccc, 1 );\r\n    containerEl.appendChild( renderer.domElement );\r\n\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n\r\n    // add control\r\n    const orbitControl = new OrbitControls( camera, renderer.domElement );\r\n    // dampling\r\n    // orbitControl.enableDamping = true;\r\n    // orbitControl.dampingFactor = 0.05;\r\n    // // to cancel out the super fast rotation after enabled damping\r\n    // // orbitControl.enableRotate = false;\r\n    // orbitControl.rotateSpeed = 0.02;\r\n    // orbitControl.autoRotateSpeed = 0.05;\r\n    \r\n    /**\r\n     * limit the vertical rotation\r\n     * https://stackoverflow.com/questions/25308943/limit-orbitcontrols-horizontal-rotation/25311658#25311658\r\n     **/ \r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians\r\n    // orbitControl.minPolarAngle = Math.PI / 8;\r\n    // orbitControl.maxPolarAngle = Math.PI * 3 / 8;\r\n    // // How far you can orbit horizontally, upper and lower limits.\r\n    // // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    // orbitControl.minAzimuthAngle = Math.PI / 4;\r\n    // orbitControl.maxAzimuthAngle = Math.PI / 4; \r\n    \r\n    // // to disable zoom\r\n    // orbitControl.enableZoom = false;\r\n    // orbitControl.minDistance = 5;\r\n    // orbitControl.maxDistance = 5;\r\n    // to disable rotation\r\n    // orbitControl.enableRotate = false;\r\n    // to disable pan\r\n    // orbitControl.enablePan = false;\r\n    // orbitControl.panSpeed = 0.05;\r\n    // raycaster\r\n    const raycaster = new THREE.Raycaster(camera.position, new THREE.Vector3(0, 0, 0), 0, orbitControl.maxDistance * 2);\r\n\r\n    const clock = new THREE.Clock();\r\n\r\n    const loader = new FBXLoader();\r\n    let mixer = null;\r\n    loader.load(`./media/fbx/${fbxName}.fbx`, (object) => {\r\n      mixer = new THREE.AnimationMixer( object );\r\n      let action = null;\r\n      if (object.animations.length) {\r\n        action = mixer.clipAction( object.animations[ 0 ] );\r\n        action.play();\r\n      }\r\n      // action.loop = THREE.LoopOnce;\r\n      // action.clampWhenFinished = true;\r\n      // object.traverse( function ( child ) {\r\n      //   if ( child.isMesh ) {\r\n      //     child.castShadow = true;\r\n      //     child.receiveShadow = true;\r\n      //   }\r\n      // });\r\n      // debugger;\r\n      const cameraOfFbx = object.getObjectByName('Camera');\r\n      if (cameraOfFbx) {\r\n        setCameraPosition([\r\n          cameraOfFbx.position.x,\r\n          cameraOfFbx.position.y,\r\n          cameraOfFbx.position.z\r\n        ]);\r\n        camera.position.set(\r\n          cameraOfFbx.position.x,\r\n          cameraOfFbx.position.y,\r\n          cameraOfFbx.position.z\r\n        );\r\n      }\r\n\r\n      for (let i = 'a'.charCodeAt(0); i <= 'z'.charCodeAt(0); i++) {\r\n        const currentChar = String.fromCharCode(i);\r\n        const videoElement = object.getObjectByName(`video${currentChar}`, true);\r\n        if (videoElement) {\r\n          const video = document.createElement('video');\r\n          video.oncanplay = () => {\r\n            video.play();\r\n          }\r\n          video.muted = true;\r\n          video.loop = true;\r\n          video.autoplay = true;\r\n          video.src = `./media/fbx/video${currentChar}.mp4`;\r\n          const texture = new THREE.VideoTexture( video );\r\n            texture.minFilter = THREE.LinearFilter;\r\n            texture.magFilter = THREE.LinearFilter;\r\n            texture.format = THREE.RGBFormat;\r\n            videoElement.material.map = texture;\r\n        }\r\n      }\r\n      addShadowToChild(object, scene);\r\n      // object.scale.set(0.01, 0.01, 0.01);\r\n      scene.add(object);\r\n\r\n\r\n      camera.lookAt(object);\r\n      setThreeObjects((prevThreeObjects) => {\r\n        return {\r\n          ...prevThreeObjects,\r\n          mixer: mixer,\r\n          action: action,\r\n        }\r\n      })\r\n    }, (item) => {\r\n      // console.log( item, loaded, total );\r\n      console.log(item.loaded / item.total * 100 + '%');\r\n    }, (err) => {\r\n      console.log(err);\r\n    });\r\n    \r\n    setThreeObjects({\r\n      scene: scene,\r\n      camera: camera,\r\n      containerEl: containerEl,\r\n      renderer: renderer,\r\n      orbitControl: orbitControl,\r\n      raycaster: raycaster,\r\n      clock: clock,\r\n    })\r\n  }\r\n  const update = () => {\r\n    animationFrame = setTimeout(() => update(), 1000 / 30);\r\n    // fix the animation step to 30fps\r\n    const delta = 1 / 30; //threeObjects.clock.getDelta();\r\n    if (threeObjects.mixer) {\r\n      threeObjects.mixer.update(delta);\r\n    }\r\n    // try move camera to new position\r\n    // const newCamPos = cameraPosition;\r\n    // const oldCamPos = threeObjects.camera.position;\r\n    // if (newCamPos[0] !== oldCamPos.x ||\r\n    //   newCamPos[1] !== oldCamPos.y||\r\n    //   newCamPos[2] !== oldCamPos.z) {\r\n    //   oldCamPos.x = (newCamPos[0] - oldCamPos.x) * 0.15 + oldCamPos.x;\r\n    //   oldCamPos.y = (newCamPos[1] - oldCamPos.y) * 0.15 + oldCamPos.y;\r\n    //   oldCamPos.z = (newCamPos[2] - oldCamPos.z) * 0.15 + oldCamPos.z;\r\n    // }\r\n    threeObjects.orbitControl.update();\r\n    threeObjects.renderer.render( threeObjects.scene, threeObjects.camera );\r\n  };\r\n  // const doCameraAnimation = () => {\r\n  //   setCameraPosition((prevCameraPosition) => {\r\n  //     return (prevCameraPosition + 1) % cameraDefaultPosition.length;\r\n  //   });\r\n  // };\r\n  const onResize = () => {\r\n    threeObjects.camera.aspect = threeObjects.containerEl.offsetWidth / threeObjects.containerEl.offsetHeight;\r\n    threeObjects.camera.updateProjectionMatrix();\r\n    threeObjects.renderer.setSize( threeObjects.containerEl.offsetWidth, threeObjects.containerEl.offsetHeight );\r\n  }\r\n  useEffect(() => {\r\n    initScene();\r\n  }, []);\r\n  useEffect(() => {\r\n    window.addEventListener('resize', onResize);\r\n    return () => {\r\n      window.removeEventListener('resize', onResize);\r\n    }\r\n  }, [threeObjects])\r\n  useEffect(() => {\r\n    if (animationFrame)\r\n      // cancelAnimationFrame(animationFrame);\r\n      clearTimeout(animationFrame);\r\n    // console.log(threeObjects);\r\n    if (threeObjects.scene) {\r\n      animationFrame = setTimeout(() => update(), 1000 / 30);//update();\r\n    }\r\n    return () => {\r\n      if (animationFrame)\r\n        // cancelAnimationFrame(animationFrame);\r\n        clearTimeout(animationFrame);\r\n    }\r\n  }, [threeObjects, cameraPosition]);\r\n  const backToInitialView = () => {\r\n    threeObjects.orbitControl.reset();\r\n    threeObjects.camera.position.set(\r\n      cameraPosition[0],\r\n      cameraPosition[1],\r\n      cameraPosition[2]\r\n    );\r\n  }\r\n  return <div ref={setContainerEl}\r\n    // onClick={doCameraAnimation}\r\n    className=\"threeCanvas\"\r\n    style={{\r\n      height: '100vh',\r\n    }}>\r\n    <div className=\"hintsText\">\r\n      <ul>\r\n        <li>Left button to rotate</li>\r\n        <li>Wheel button to zoom</li>\r\n        <li>Right button to pan</li>\r\n      </ul>\r\n      <div className=\"backToInitialView\"\r\n        onClick={backToInitialView}\r\n      >\r\n        Back to default view\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nexport default App;","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\n\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\":  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"gl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { CopyShader };\n","import {\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tMesh\n} from 'three';\n\nfunction Pass() {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n}\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { Pass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass } from \"utils/vendor/postprocessing/Pass.js\";\n\nvar ShaderPass = function ( shader, textureID ) {\n\n\tPass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof ShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new ShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nShaderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: ShaderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n} );\n\nexport { ShaderPass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nimport { Pass } from 'utils/vendor/postprocessing/Pass';\n\nvar MaskPass = function ( scene, camera ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nMaskPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: MaskPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tvar context = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\n\t}\n\n} );\n\n\nvar ClearMaskPass = function () {\n\n\tPass.call( this );\n\n\tthis.needsSwap = false;\n\n};\n\nClearMaskPass.prototype = Object.create( Pass.prototype );\n\nObject.assign( ClearMaskPass.prototype, {\n\n\trender: function ( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n} );\n\nexport { MaskPass, ClearMaskPass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tClock,\n\tLinearFilter,\n\tMesh,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tRGBAFormat,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { ShaderPass } from \"../postprocessing/ShaderPass.js\";\nimport { MaskPass } from \"../postprocessing/MaskPass.js\";\nimport { ClearMaskPass } from \"../postprocessing/MaskPass.js\";\n\nvar EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tformat: RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getSize( new Vector2() );\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\tthis._width = size.width;\n\t\tthis._height = size.height;\n\n\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t} else {\n\n\t\tthis._pixelRatio = 1;\n\t\tthis._width = renderTarget.width;\n\t\tthis._height = renderTarget.height;\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.renderToScreen = true;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t}\n\n\tif ( ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new ShaderPass( CopyShader );\n\n\tthis.clock = new Clock();\n\n};\n\nObject.assign( EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\n\t\tvar size = this.renderer.getDrawingBufferSize( new Vector2() );\n\t\tpass.setSize( size.width, size.height );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\tisLastEnabledPass: function ( passIndex ) {\n\n\t\tfor ( var i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\trender: function ( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tvar currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.context;\n\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tvar effectiveWidth = this._width * this._pixelRatio;\n\t\tvar effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t},\n\n\tsetPixelRatio: function ( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n} );\n\n\nvar Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { EffectComposer, Pass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\n\nimport { Pass } from \"utils/vendor/postprocessing/Pass.js\";\n\nvar RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.clearDepth = false;\n\tthis.needsSwap = false;\n\n};\n\nRenderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\tvar oldClearColor, oldClearAlpha;\n\n\t\tif ( this.clearColor ) {\n\n\t\t\toldClearColor = renderer.getClearColor().getHex();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = null;\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n} );\n\nexport { RenderPass };\n","/**\n * TODO\n */\n\nimport {\n\tMatrix4,\n\tVector2\n} from 'three';\n\nvar SAOShader = {\n\tdefines: {\n\t\t'NUM_SAMPLES': 7,\n\t\t'NUM_RINGS': 4,\n\t\t'NORMAL_TEXTURE': 0,\n\t\t'DIFFUSE_TEXTURE': 0,\n\t\t'DEPTH_PACKING': 1,\n\t\t'PERSPECTIVE_CAMERA': 1\n\t},\n\tuniforms: {\n\n\t\t'tDepth': { value: null },\n\t\t'tDiffuse': { value: null },\n\t\t'tNormal': { value: null },\n\t\t'size': { value: new Vector2( 512, 512 ) },\n\n\t\t'cameraNear': { value: 1 },\n\t\t'cameraFar': { value: 100 },\n\t\t'cameraProjectionMatrix': { value: new Matrix4() },\n\t\t'cameraInverseProjectionMatrix': { value: new Matrix4() },\n\n\t\t'scale': { value: 1.0 },\n\t\t'intensity': { value: 0.1 },\n\t\t'bias': { value: 0.5 },\n\n\t\t'minResolution': { value: 0.0 },\n\t\t'kernelRadius': { value: 100.0 },\n\t\t'randomSeed': { value: 0.0 }\n\t},\n\tvertexShader: [\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\tfragmentShader: [\n\t\t\"#include <common>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"#if DIFFUSE_TEXTURE == 1\",\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"#endif\",\n\n\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\"#if NORMAL_TEXTURE == 1\",\n\t\t\"uniform sampler2D tNormal;\",\n\t\t\"#endif\",\n\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\t\t\"uniform mat4 cameraProjectionMatrix;\",\n\t\t\"uniform mat4 cameraInverseProjectionMatrix;\",\n\n\t\t\"uniform float scale;\",\n\t\t\"uniform float intensity;\",\n\t\t\"uniform float bias;\",\n\t\t\"uniform float kernelRadius;\",\n\t\t\"uniform float minResolution;\",\n\t\t\"uniform vec2 size;\",\n\t\t\"uniform float randomSeed;\",\n\n\t\t\"// RGBA depth\",\n\n\t\t\"#include <packing>\",\n\n\t\t\"vec4 getDefaultColor( const in vec2 screenPosition ) {\",\n\t\t\"\t#if DIFFUSE_TEXTURE == 1\",\n\t\t\"\treturn texture2D( tDiffuse, vUv );\",\n\t\t\"\t#else\",\n\t\t\"\treturn vec4( 1.0 );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float getDepth( const in vec2 screenPosition ) {\",\n\t\t\"\t#if DEPTH_PACKING == 1\",\n\t\t\"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\n\t\t\"\t#else\",\n\t\t\"\treturn texture2D( tDepth, screenPosition ).x;\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float getViewZ( const in float depth ) {\",\n\t\t\"\t#if PERSPECTIVE_CAMERA == 1\",\n\t\t\"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#else\",\n\t\t\"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\n\t\t\"\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\n\t\t\"\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\n\t\t\"\tclipPosition *= clipW; // unprojection.\",\n\n\t\t\"\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\t\t\"}\",\n\n\t\t\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\n\t\t\"\t#if NORMAL_TEXTURE == 1\",\n\t\t\"\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\n\t\t\"\t#else\",\n\t\t\"\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float scaleDividedByCameraFar;\",\n\t\t\"float minResolutionMultipliedByCameraFar;\",\n\n\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\t\t\"\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\"\tfloat viewDistance = length( viewDelta );\",\n\t\t\"\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\n\n\t\t\"\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\n\t\t\"}\",\n\n\t\t\"// moving costly divides into consts\",\n\t\t\"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\",\n\t\t\"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\",\n\n\t\t\"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\",\n\t\t\"\t// precompute some variables require in getOcclusion.\",\n\t\t\"\tscaleDividedByCameraFar = scale / cameraFar;\",\n\t\t\"\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\n\t\t\"\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\n\n\t\t\"\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\",\n\t\t\"\tfloat angle = rand( vUv + randomSeed ) * PI2;\",\n\t\t\"\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\",\n\t\t\"\tvec2 radiusStep = radius;\",\n\n\t\t\"\tfloat occlusionSum = 0.0;\",\n\t\t\"\tfloat weightSum = 0.0;\",\n\n\t\t\"\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\",\n\t\t\"\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\n\t\t\"\t\tradius += radiusStep;\",\n\t\t\"\t\tangle += ANGLE_STEP;\",\n\n\t\t\"\t\tfloat sampleDepth = getDepth( sampleUv );\",\n\t\t\"\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\"\t\t\tcontinue;\",\n\t\t\"\t\t}\",\n\n\t\t\"\t\tfloat sampleViewZ = getViewZ( sampleDepth );\",\n\t\t\"\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\n\t\t\"\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\n\t\t\"\t\tweightSum += 1.0;\",\n\t\t\"\t}\",\n\n\t\t\"\tif( weightSum == 0.0 ) discard;\",\n\n\t\t\"\treturn occlusionSum * ( intensity / weightSum );\",\n\t\t\"}\",\n\n\n\t\t\"void main() {\",\n\t\t\"\tfloat centerDepth = getDepth( vUv );\",\n\t\t\"\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\"\t\tdiscard;\",\n\t\t\"\t}\",\n\n\t\t\"\tfloat centerViewZ = getViewZ( centerDepth );\",\n\t\t\"\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\n\n\t\t\"\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\",\n\n\t\t\"\tgl_FragColor = getDefaultColor( vUv );\",\n\t\t\"\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\",\n\t\t\"}\"\n\t].join( \"\\n\" )\n};\n\nexport { SAOShader };\n","/**\n * TODO\n */\n\nimport {\n\tVector2\n} from 'three';\n\nvar DepthLimitedBlurShader = {\n\tdefines: {\n\t\t'KERNEL_RADIUS': 4,\n\t\t'DEPTH_PACKING': 1,\n\t\t'PERSPECTIVE_CAMERA': 1\n\t},\n\tuniforms: {\n\t\t'tDiffuse': { value: null },\n\t\t'size': { value: new Vector2( 512, 512 ) },\n\t\t'sampleUvOffsets': { value: [ new Vector2( 0, 0 ) ] },\n\t\t'sampleWeights': { value: [ 1.0 ] },\n\t\t'tDepth': { value: null },\n\t\t'cameraNear': { value: 10 },\n\t\t'cameraFar': { value: 1000 },\n\t\t'depthCutoff': { value: 10 },\n\t},\n\tvertexShader: [\n\t\t\"#include <common>\",\n\n\t\t\"uniform vec2 size;\",\n\n\t\t\"varying vec2 vUv;\",\n\t\t\"varying vec2 vInvSize;\",\n\n\t\t\"void main() {\",\n\t\t\"\tvUv = uv;\",\n\t\t\"\tvInvSize = 1.0 / size;\",\n\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\tfragmentShader: [\n\t\t\"#include <common>\",\n\t\t\"#include <packing>\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\t\t\"uniform float depthCutoff;\",\n\n\t\t\"uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\",\n\t\t\"uniform float sampleWeights[ KERNEL_RADIUS + 1 ];\",\n\n\t\t\"varying vec2 vUv;\",\n\t\t\"varying vec2 vInvSize;\",\n\n\t\t\"float getDepth( const in vec2 screenPosition ) {\",\n\t\t\"\t#if DEPTH_PACKING == 1\",\n\t\t\"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\n\t\t\"\t#else\",\n\t\t\"\treturn texture2D( tDepth, screenPosition ).x;\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float getViewZ( const in float depth ) {\",\n\t\t\"\t#if PERSPECTIVE_CAMERA == 1\",\n\t\t\"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#else\",\n\t\t\"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"void main() {\",\n\t\t\"\tfloat depth = getDepth( vUv );\",\n\t\t\"\tif( depth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\"\t\tdiscard;\",\n\t\t\"\t}\",\n\n\t\t\"\tfloat centerViewZ = -getViewZ( depth );\",\n\t\t\"\tbool rBreak = false, lBreak = false;\",\n\n\t\t\"\tfloat weightSum = sampleWeights[0];\",\n\t\t\"\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\",\n\n\t\t\"\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\",\n\n\t\t\"\t\tfloat sampleWeight = sampleWeights[i];\",\n\t\t\"\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\",\n\n\t\t\"\t\tvec2 sampleUv = vUv + sampleUvOffset;\",\n\t\t\"\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\",\n\n\t\t\"\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\",\n\n\t\t\"\t\tif( ! rBreak ) {\",\n\t\t\"\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\",\n\t\t\"\t\t\tweightSum += sampleWeight;\",\n\t\t\"\t\t}\",\n\n\t\t\"\t\tsampleUv = vUv - sampleUvOffset;\",\n\t\t\"\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\",\n\n\t\t\"\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\",\n\n\t\t\"\t\tif( ! lBreak ) {\",\n\t\t\"\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\",\n\t\t\"\t\t\tweightSum += sampleWeight;\",\n\t\t\"\t\t}\",\n\n\t\t\"\t}\",\n\n\t\t\"\tgl_FragColor = diffuseSum / weightSum;\",\n\t\t\"}\"\n\t].join( \"\\n\" )\n};\n\nvar BlurShaderUtils = {\n\n\tcreateSampleWeights: function ( kernelRadius, stdDev ) {\n\n\t\tvar gaussian = function ( x, stdDev ) {\n\n\t\t\treturn Math.exp( - ( x * x ) / ( 2.0 * ( stdDev * stdDev ) ) ) / ( Math.sqrt( 2.0 * Math.PI ) * stdDev );\n\n\t\t};\n\n\t\tvar weights = [];\n\n\t\tfor ( var i = 0; i <= kernelRadius; i ++ ) {\n\n\t\t\tweights.push( gaussian( i, stdDev ) );\n\n\t\t}\n\n\t\treturn weights;\n\n\t},\n\n\tcreateSampleOffsets: function ( kernelRadius, uvIncrement ) {\n\n\t\tvar offsets = [];\n\n\t\tfor ( var i = 0; i <= kernelRadius; i ++ ) {\n\n\t\t\toffsets.push( uvIncrement.clone().multiplyScalar( i ) );\n\n\t\t}\n\n\t\treturn offsets;\n\n\t},\n\n\tconfigure: function ( material, kernelRadius, stdDev, uvIncrement ) {\n\n\t\tmaterial.defines[ 'KERNEL_RADIUS' ] = kernelRadius;\n\t\tmaterial.uniforms[ 'sampleUvOffsets' ].value = BlurShaderUtils.createSampleOffsets( kernelRadius, uvIncrement );\n\t\tmaterial.uniforms[ 'sampleWeights' ].value = BlurShaderUtils.createSampleWeights( kernelRadius, stdDev );\n\t\tmaterial.needsUpdate = true;\n\n\t}\n\n};\n\nexport { DepthLimitedBlurShader, BlurShaderUtils };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Unpack RGBA depth shader\n * - show RGBA encoded depth as monochrome color\n */\n\n\n\nvar UnpackDepthRGBAShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\": { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"#include <packing>\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\",\n\t\t\t\"gl_FragColor = vec4( vec3( depth ), opacity );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { UnpackDepthRGBAShader };\n","/**\n * @author ludobaka / ludobaka.github.io\n * SAO implementation inspired from bhouston previous SAO work\n */\n\nimport {\n\tAddEquation,\n\tColor,\n\tCustomBlending,\n\tDepthTexture,\n\tDstAlphaFactor,\n\tDstColorFactor,\n\tLinearFilter,\n\tMeshDepthMaterial,\n\tMeshNormalMaterial,\n\tNearestFilter,\n\tNoBlending,\n\tRGBADepthPacking,\n\tRGBAFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tUnsignedShortType,\n\tVector2,\n\tWebGLRenderTarget,\n\tZeroFactor\n} from 'three';\nimport { Pass } from \"../postprocessing/Pass.js\";\nimport { SAOShader } from \"../shaders/SAOShader.js\";\nimport { DepthLimitedBlurShader, BlurShaderUtils } from \"../shaders/DepthLimitedBlurShader.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { UnpackDepthRGBAShader } from \"../shaders/UnpackDepthRGBAShader.js\";\n\nvar SAOPass = function ( scene, camera, depthTexture, useNormals, resolution ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.supportsDepthTextureExtension = ( depthTexture !== undefined ) ? depthTexture : false;\n\tthis.supportsNormalTexture = ( useNormals !== undefined ) ? useNormals : false;\n\n\tthis.originalClearColor = new Color();\n\tthis.oldClearColor = new Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.params = {\n\t\toutput: 0,\n\t\tsaoBias: 0.5,\n\t\tsaoIntensity: 0.18,\n\t\tsaoScale: 1,\n\t\tsaoKernelRadius: 100,\n\t\tsaoMinResolution: 0,\n\t\tsaoBlur: true,\n\t\tsaoBlurRadius: 8,\n\t\tsaoBlurStdDev: 4,\n\t\tsaoBlurDepthCutoff: 0.01\n\t};\n\n\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\tthis.saoRenderTarget = new WebGLRenderTarget( this.resolution.x, this.resolution.y, {\n\t\tminFilter: LinearFilter,\n\t\tmagFilter: LinearFilter,\n\t\tformat: RGBAFormat\n\t} );\n\tthis.blurIntermediateRenderTarget = this.saoRenderTarget.clone();\n\tthis.beautyRenderTarget = this.saoRenderTarget.clone();\n\n\tthis.normalRenderTarget = new WebGLRenderTarget( this.resolution.x, this.resolution.y, {\n\t\tminFilter: NearestFilter,\n\t\tmagFilter: NearestFilter,\n\t\tformat: RGBAFormat\n\t} );\n\tthis.depthRenderTarget = this.normalRenderTarget.clone();\n\n\tif ( this.supportsDepthTextureExtension ) {\n\n\t\tvar depthTexture = new DepthTexture();\n\t\tdepthTexture.type = UnsignedShortType;\n\t\tdepthTexture.minFilter = NearestFilter;\n\t\tdepthTexture.maxFilter = NearestFilter;\n\n\t\tthis.beautyRenderTarget.depthTexture = depthTexture;\n\t\tthis.beautyRenderTarget.depthBuffer = true;\n\n\t}\n\n\tthis.depthMaterial = new MeshDepthMaterial();\n\tthis.depthMaterial.depthPacking = RGBADepthPacking;\n\tthis.depthMaterial.blending = NoBlending;\n\n\tthis.normalMaterial = new MeshNormalMaterial();\n\tthis.normalMaterial.blending = NoBlending;\n\n\tif ( SAOShader === undefined ) {\n\n\t\tconsole.error( 'THREE.SAOPass relies on SAOShader' );\n\n\t}\n\n\tthis.saoMaterial = new ShaderMaterial( {\n\t\tdefines: Object.assign( {}, SAOShader.defines ),\n\t\tfragmentShader: SAOShader.fragmentShader,\n\t\tvertexShader: SAOShader.vertexShader,\n\t\tuniforms: UniformsUtils.clone( SAOShader.uniforms )\n\t} );\n\tthis.saoMaterial.extensions.derivatives = true;\n\tthis.saoMaterial.defines[ 'DEPTH_PACKING' ] = this.supportsDepthTextureExtension ? 0 : 1;\n\tthis.saoMaterial.defines[ 'NORMAL_TEXTURE' ] = this.supportsNormalTexture ? 1 : 0;\n\tthis.saoMaterial.defines[ 'PERSPECTIVE_CAMERA' ] = this.camera.isPerspectiveCamera ? 1 : 0;\n\tthis.saoMaterial.uniforms[ 'tDepth' ].value = ( this.supportsDepthTextureExtension ) ? depthTexture : this.depthRenderTarget.texture;\n\tthis.saoMaterial.uniforms[ 'tNormal' ].value = this.normalRenderTarget.texture;\n\tthis.saoMaterial.uniforms[ 'size' ].value.set( this.resolution.x, this.resolution.y );\n\tthis.saoMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.getInverse( this.camera.projectionMatrix );\n\tthis.saoMaterial.uniforms[ 'cameraProjectionMatrix' ].value = this.camera.projectionMatrix;\n\tthis.saoMaterial.blending = NoBlending;\n\n\tif ( DepthLimitedBlurShader === undefined ) {\n\n\t\tconsole.error( 'THREE.SAOPass relies on DepthLimitedBlurShader' );\n\n\t}\n\n\tthis.vBlurMaterial = new ShaderMaterial( {\n\t\tuniforms: UniformsUtils.clone( DepthLimitedBlurShader.uniforms ),\n\t\tdefines: Object.assign( {}, DepthLimitedBlurShader.defines ),\n\t\tvertexShader: DepthLimitedBlurShader.vertexShader,\n\t\tfragmentShader: DepthLimitedBlurShader.fragmentShader\n\t} );\n\tthis.vBlurMaterial.defines[ 'DEPTH_PACKING' ] = this.supportsDepthTextureExtension ? 0 : 1;\n\tthis.vBlurMaterial.defines[ 'PERSPECTIVE_CAMERA' ] = this.camera.isPerspectiveCamera ? 1 : 0;\n\tthis.vBlurMaterial.uniforms[ 'tDiffuse' ].value = this.saoRenderTarget.texture;\n\tthis.vBlurMaterial.uniforms[ 'tDepth' ].value = ( this.supportsDepthTextureExtension ) ? depthTexture : this.depthRenderTarget.texture;\n\tthis.vBlurMaterial.uniforms[ 'size' ].value.set( this.resolution.x, this.resolution.y );\n\tthis.vBlurMaterial.blending = NoBlending;\n\n\tthis.hBlurMaterial = new ShaderMaterial( {\n\t\tuniforms: UniformsUtils.clone( DepthLimitedBlurShader.uniforms ),\n\t\tdefines: Object.assign( {}, DepthLimitedBlurShader.defines ),\n\t\tvertexShader: DepthLimitedBlurShader.vertexShader,\n\t\tfragmentShader: DepthLimitedBlurShader.fragmentShader\n\t} );\n\tthis.hBlurMaterial.defines[ 'DEPTH_PACKING' ] = this.supportsDepthTextureExtension ? 0 : 1;\n\tthis.hBlurMaterial.defines[ 'PERSPECTIVE_CAMERA' ] = this.camera.isPerspectiveCamera ? 1 : 0;\n\tthis.hBlurMaterial.uniforms[ 'tDiffuse' ].value = this.blurIntermediateRenderTarget.texture;\n\tthis.hBlurMaterial.uniforms[ 'tDepth' ].value = ( this.supportsDepthTextureExtension ) ? depthTexture : this.depthRenderTarget.texture;\n\tthis.hBlurMaterial.uniforms[ 'size' ].value.set( this.resolution.x, this.resolution.y );\n\tthis.hBlurMaterial.blending = NoBlending;\n\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.SAOPass relies on CopyShader' );\n\n\t}\n\n\tthis.materialCopy = new ShaderMaterial( {\n\t\tuniforms: UniformsUtils.clone( CopyShader.uniforms ),\n\t\tvertexShader: CopyShader.vertexShader,\n\t\tfragmentShader: CopyShader.fragmentShader,\n\t\tblending: NoBlending\n\t} );\n\tthis.materialCopy.transparent = true;\n\tthis.materialCopy.depthTest = false;\n\tthis.materialCopy.depthWrite = false;\n\tthis.materialCopy.blending = CustomBlending;\n\tthis.materialCopy.blendSrc = DstColorFactor;\n\tthis.materialCopy.blendDst = ZeroFactor;\n\tthis.materialCopy.blendEquation = AddEquation;\n\tthis.materialCopy.blendSrcAlpha = DstAlphaFactor;\n\tthis.materialCopy.blendDstAlpha = ZeroFactor;\n\tthis.materialCopy.blendEquationAlpha = AddEquation;\n\n\tif ( UnpackDepthRGBAShader === undefined ) {\n\n\t\tconsole.error( 'THREE.SAOPass relies on UnpackDepthRGBAShader' );\n\n\t}\n\n\tthis.depthCopy = new ShaderMaterial( {\n\t\tuniforms: UniformsUtils.clone( UnpackDepthRGBAShader.uniforms ),\n\t\tvertexShader: UnpackDepthRGBAShader.vertexShader,\n\t\tfragmentShader: UnpackDepthRGBAShader.fragmentShader,\n\t\tblending: NoBlending\n\t} );\n\n\tthis.fsQuad = new Pass.FullScreenQuad( null );\n\n};\n\nSAOPass.OUTPUT = {\n\t'Beauty': 1,\n\t'Default': 0,\n\t'SAO': 2,\n\t'Depth': 3,\n\t'Normal': 4\n};\n\nSAOPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\tconstructor: SAOPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer/*, deltaTime, maskActive*/ ) {\n\n\t\t// Rendering readBuffer first when rendering to screen\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.materialCopy.blending = NoBlending;\n\t\t\tthis.materialCopy.uniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\t\tthis.materialCopy.needsUpdate = true;\n\t\t\tthis.renderPass( renderer, this.materialCopy, null );\n\n\t\t}\n\n\t\tif ( this.params.output === 1 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.oldClearColor.copy( renderer.getClearColor() );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setRenderTarget( this.depthRenderTarget );\n\t\trenderer.clear();\n\n\t\tthis.saoMaterial.uniforms[ 'bias' ].value = this.params.saoBias;\n\t\tthis.saoMaterial.uniforms[ 'intensity' ].value = this.params.saoIntensity;\n\t\tthis.saoMaterial.uniforms[ 'scale' ].value = this.params.saoScale;\n\t\tthis.saoMaterial.uniforms[ 'kernelRadius' ].value = this.params.saoKernelRadius;\n\t\tthis.saoMaterial.uniforms[ 'minResolution' ].value = this.params.saoMinResolution;\n\t\tthis.saoMaterial.uniforms[ 'cameraNear' ].value = this.camera.near;\n\t\tthis.saoMaterial.uniforms[ 'cameraFar' ].value = this.camera.far;\n\t\t// this.saoMaterial.uniforms['randomSeed'].value = Math.random();\n\n\t\tvar depthCutoff = this.params.saoBlurDepthCutoff * ( this.camera.far - this.camera.near );\n\t\tthis.vBlurMaterial.uniforms[ 'depthCutoff' ].value = depthCutoff;\n\t\tthis.hBlurMaterial.uniforms[ 'depthCutoff' ].value = depthCutoff;\n\n\t\tthis.vBlurMaterial.uniforms[ 'cameraNear' ].value = this.camera.near;\n\t\tthis.vBlurMaterial.uniforms[ 'cameraFar' ].value = this.camera.far;\n\t\tthis.hBlurMaterial.uniforms[ 'cameraNear' ].value = this.camera.near;\n\t\tthis.hBlurMaterial.uniforms[ 'cameraFar' ].value = this.camera.far;\n\n\t\tthis.params.saoBlurRadius = Math.floor( this.params.saoBlurRadius );\n\t\tif ( ( this.prevStdDev !== this.params.saoBlurStdDev ) || ( this.prevNumSamples !== this.params.saoBlurRadius ) ) {\n\n\t\t\tBlurShaderUtils.configure( this.vBlurMaterial, this.params.saoBlurRadius, this.params.saoBlurStdDev, new Vector2( 0, 1 ) );\n\t\t\tBlurShaderUtils.configure( this.hBlurMaterial, this.params.saoBlurRadius, this.params.saoBlurStdDev, new Vector2( 1, 0 ) );\n\t\t\tthis.prevStdDev = this.params.saoBlurStdDev;\n\t\t\tthis.prevNumSamples = this.params.saoBlurRadius;\n\n\t\t}\n\n\t\t// Rendering scene to depth texture\n\t\trenderer.setClearColor( 0x000000 );\n\t\trenderer.setRenderTarget( this.beautyRenderTarget );\n\t\trenderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// Re-render scene if depth texture extension is not supported\n\t\tif ( ! this.supportsDepthTextureExtension ) {\n\n\t\t\t// Clear rule : far clipping plane in both RGBA and Basic encoding\n\t\t\tthis.renderOverride( renderer, this.depthMaterial, this.depthRenderTarget, 0x000000, 1.0 );\n\n\t\t}\n\n\t\tif ( this.supportsNormalTexture ) {\n\n\t\t\t// Clear rule : default normal is facing the camera\n\t\t\tthis.renderOverride( renderer, this.normalMaterial, this.normalRenderTarget, 0x7777ff, 1.0 );\n\n\t\t}\n\n\t\t// Rendering SAO texture\n\t\tthis.renderPass( renderer, this.saoMaterial, this.saoRenderTarget, 0xffffff, 1.0 );\n\n\t\t// Blurring SAO texture\n\t\tif ( this.params.saoBlur ) {\n\n\t\t\tthis.renderPass( renderer, this.vBlurMaterial, this.blurIntermediateRenderTarget, 0xffffff, 1.0 );\n\t\t\tthis.renderPass( renderer, this.hBlurMaterial, this.saoRenderTarget, 0xffffff, 1.0 );\n\n\t\t}\n\n\t\tvar outputMaterial = this.materialCopy;\n\t\t// Setting up SAO rendering\n\t\tif ( this.params.output === 3 ) {\n\n\t\t\tif ( this.supportsDepthTextureExtension ) {\n\n\t\t\t\tthis.materialCopy.uniforms[ 'tDiffuse' ].value = this.beautyRenderTarget.depthTexture;\n\t\t\t\tthis.materialCopy.needsUpdate = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.depthCopy.uniforms[ 'tDiffuse' ].value = this.depthRenderTarget.texture;\n\t\t\t\tthis.depthCopy.needsUpdate = true;\n\t\t\t\toutputMaterial = this.depthCopy;\n\n\t\t\t}\n\n\t\t} else if ( this.params.output === 4 ) {\n\n\t\t\tthis.materialCopy.uniforms[ 'tDiffuse' ].value = this.normalRenderTarget.texture;\n\t\t\tthis.materialCopy.needsUpdate = true;\n\n\t\t} else {\n\n\t\t\tthis.materialCopy.uniforms[ 'tDiffuse' ].value = this.saoRenderTarget.texture;\n\t\t\tthis.materialCopy.needsUpdate = true;\n\n\t\t}\n\n\t\t// Blending depends on output, only want a CustomBlending when showing SAO\n\t\tif ( this.params.output === 0 ) {\n\n\t\t\toutputMaterial.blending = CustomBlending;\n\n\t\t} else {\n\n\t\t\toutputMaterial.blending = NoBlending;\n\n\t\t}\n\n\t\t// Rendering SAOPass result on top of previous pass\n\t\tthis.renderPass( renderer, outputMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t},\n\n\trenderPass: function ( renderer, passMaterial, renderTarget, clearColor, clearAlpha ) {\n\n\t\t// save original state\n\t\tthis.originalClearColor.copy( renderer.getClearColor() );\n\t\tvar originalClearAlpha = renderer.getClearAlpha();\n\t\tvar originalAutoClear = renderer.autoClear;\n\n\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t// setup pass state\n\t\trenderer.autoClear = false;\n\t\tif ( ( clearColor !== undefined ) && ( clearColor !== null ) ) {\n\n\t\t\trenderer.setClearColor( clearColor );\n\t\t\trenderer.setClearAlpha( clearAlpha || 0.0 );\n\t\t\trenderer.clear();\n\n\t\t}\n\n\t\tthis.fsQuad.material = passMaterial;\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// restore original state\n\t\trenderer.autoClear = originalAutoClear;\n\t\trenderer.setClearColor( this.originalClearColor );\n\t\trenderer.setClearAlpha( originalClearAlpha );\n\n\t},\n\n\trenderOverride: function ( renderer, overrideMaterial, renderTarget, clearColor, clearAlpha ) {\n\n\t\tthis.originalClearColor.copy( renderer.getClearColor() );\n\t\tvar originalClearAlpha = renderer.getClearAlpha();\n\t\tvar originalAutoClear = renderer.autoClear;\n\n\t\trenderer.setRenderTarget( renderTarget );\n\t\trenderer.autoClear = false;\n\n\t\tclearColor = overrideMaterial.clearColor || clearColor;\n\t\tclearAlpha = overrideMaterial.clearAlpha || clearAlpha;\n\t\tif ( ( clearColor !== undefined ) && ( clearColor !== null ) ) {\n\n\t\t\trenderer.setClearColor( clearColor );\n\t\t\trenderer.setClearAlpha( clearAlpha || 0.0 );\n\t\t\trenderer.clear();\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = overrideMaterial;\n\t\trenderer.render( this.scene, this.camera );\n\t\tthis.scene.overrideMaterial = null;\n\n\t\t// restore original state\n\t\trenderer.autoClear = originalAutoClear;\n\t\trenderer.setClearColor( this.originalClearColor );\n\t\trenderer.setClearAlpha( originalClearAlpha );\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.beautyRenderTarget.setSize( width, height );\n\t\tthis.saoRenderTarget.setSize( width, height );\n\t\tthis.blurIntermediateRenderTarget.setSize( width, height );\n\t\tthis.normalRenderTarget.setSize( width, height );\n\t\tthis.depthRenderTarget.setSize( width, height );\n\n\t\tthis.saoMaterial.uniforms[ 'size' ].value.set( width, height );\n\t\tthis.saoMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.getInverse( this.camera.projectionMatrix );\n\t\tthis.saoMaterial.uniforms[ 'cameraProjectionMatrix' ].value = this.camera.projectionMatrix;\n\t\tthis.saoMaterial.needsUpdate = true;\n\n\t\tthis.vBlurMaterial.uniforms[ 'size' ].value.set( width, height );\n\t\tthis.vBlurMaterial.needsUpdate = true;\n\n\t\tthis.hBlurMaterial.uniforms[ 'size' ].value.set( width, height );\n\t\tthis.hBlurMaterial.needsUpdate = true;\n\n\t}\n\n} );\n\nexport { SAOPass };\n","import React from 'react';\r\nimport {useState, useEffect} from 'react';\r\nimport * as THREE from 'three';\r\nimport OrbitControls from 'utils/vendor/orbitControls';\r\n\r\nimport { EffectComposer } from 'utils/vendor/postprocessing/EffectComposer';\r\nimport { RenderPass } from 'utils/vendor/postprocessing/RenderPass';\r\nimport { SAOPass } from 'utils/vendor/postprocessing/SAOPass';\r\n\r\nimport fbxUrl from 'media/models/190715_CLP_game(8).fbx';\r\n// import fbxUrl from 'media/models/190715_CLP_game(8)_bakelight.fbx';\r\n\r\nimport meatUrl from 'media/textures/meat.png';\r\nimport mildMeatUrl from 'media/textures/mid_meat.png';\r\nimport welldoneMeatUrl from 'media/textures/welldone_meat.png';\r\n\r\n// import fpsRenderer from 'components/fpsRenderer';\r\n\r\nimport './kitchenViewer.css';\r\n\r\nconst FBXLoader = require('three-fbxloader-offical');\r\n\r\nconst addShadowToChild = (object, scene) => {\r\n  let camera = null;\r\n  object.traverse( function ( child ) {\r\n    if (object !== child) {\r\n      addShadowToChild(child, scene);\r\n    }\r\n    // if ( child.isMesh ) {\r\n      \r\n      // child.need\r\n    // }\r\n    if (child.isPointLight) {\r\n      // const lightHelper = new THREE.PointLightHelper( child, 10 );\r\n      // scene.add(lightHelper);\r\n      child.castShadow = false;\r\n      child.intensity = 1;\r\n    } else if (child.isDirectionalLight) {\r\n      child.castShadow = true;\r\n      // child.receiveShadow = true;\r\n      child.shadow.mapSize.width = 1024;\r\n      child.shadow.mapSize.height = 1024;\r\n      child.shadow.camera.near = 0.5;    // default\r\n      child.shadow.camera.far = 5000;     // default\r\n      child.shadow.camera.left = -1000;\r\n      child.shadow.camera.right = 1000;\r\n      child.shadow.camera.bottom = -1000;\r\n      child.shadow.camera.top = 1000;\r\n      child.intensity = 1;\r\n      child.position.y = 340;\r\n      child.position.z = -150;\r\n      // const lightHelper = new THREE.DirectionalLightHelper( child, 10 );\r\n      // scene.add(lightHelper);\r\n    } else if (child.isCamera) {\r\n      camera = child;\r\n    } else if (child.children.length ===0) {\r\n      child.castShadow = true;\r\n      child.receiveShadow = true;\r\n    }\r\n  });\r\n  return camera;\r\n}\r\n\r\nconst executeCrossFade = (startAction, endAction, duration) => {\r\n  endAction.enabled = true;\r\n  endAction.setEffectiveTimeScale(1);\r\n  endAction.setEffectiveWeight(1);\r\n  endAction.time = 0;\r\n  startAction.crossFadeTo( endAction, duration, true );\r\n}\r\nconst pansLoader = (roomLoaded, progressCallback) => {\r\n  const loader = new FBXLoader();\r\n  const pans = [\r\n    [\r\n      require('media/models/190717_frying pan animationA_shake.fbx'),\r\n      require('media/models/190717_frying pan animationA_flip.fbx')\r\n    ],\r\n    [\r\n      require('media/models/190717_frying pan animationB_shake.fbx'),\r\n      require('media/models/190717_frying pan animationB_flip.fbx')\r\n    ],\r\n    [\r\n      require('media/models/190717_frying pan animationC_shake.fbx'),\r\n      require('media/models/190717_frying pan animationC_flip.fbx')\r\n    ]\r\n  ];\r\n  // 3 pans, fbx specific\r\n  const pansNameMapping = [\r\n    {\r\n      panName: 'frying_pan_A',\r\n      tracksRename: {\r\n        'Meat_A__Copy_.position': 'Meat_A.position',\r\n        'Meat_A__Copy_.quaternion': 'Meat_A.quaternion',\r\n        'frying_pan_A_2.position': 'frying_pan_A_2.position',\r\n        'frying_pan_A_2.quaternion': 'frying_pan_A_2.quaternion'\r\n      }\r\n    },\r\n    {\r\n      panName: 'frying_pan_B',\r\n      tracksRename: {\r\n        'Meat_B__Copy_.position': 'Meat_B.position',\r\n        'Meat_B__Copy_.quaternion': 'Meat_B.quaternion',\r\n        'frying_pan_B_2.position': 'frying_pan_B_2.position',\r\n        'frying_pan_B_2.quaternion': 'frying_pan_B_2.quaternion'\r\n      }\r\n    },\r\n    {\r\n      panName: 'frying_pan_C',\r\n      tracksRename: {\r\n        'Meat_C__Copy_.position': 'Meat_C.position',\r\n        'Meat_C__Copy_.quaternion': 'Meat_C.quaternion',\r\n        'frying_pan_C_2.position': 'frying_pan_C_2.position',\r\n        'frying_pan_C_2.quaternion': 'frying_pan_C_2.quaternion'\r\n      }\r\n    }\r\n  ];\r\n  const mixersArray = [];\r\n  let progressArray = new Array(pans.length * 2).fill(0);\r\n  const onProgress = () =>{\r\n    const totalProgress = progressArray.reduce((a, c) => a + c) / pans.length / 2;\r\n    const totalProgressPercent = ~~(totalProgress * 10000) / 100;\r\n    console.log(totalProgressPercent);\r\n    typeof(progressCallback) === 'function' && progressCallback(totalProgressPercent);\r\n  }\r\n  pans.forEach((pan, idx) => {\r\n    const currentPan = pansNameMapping[idx];\r\n    const panObject = roomLoaded.children.find(child => child.name === currentPan['panName']);\r\n    const mixer = new THREE.AnimationMixer( panObject );    \r\n    const shakePromise = new Promise((resolve, reject) => {\r\n      loader.load(pan[0], (object) => {\r\n        object.animations[ 0 ][\"tracks\"].forEach(track => {\r\n          track['name'] = currentPan['tracksRename'][track['name']];\r\n        })\r\n        const action = mixer.clipAction( object.animations[ 0 ] );\r\n        // action.loop = THREE.LoopOnce;\r\n        // action.clampWhenFinished = true;\r\n        action.play();\r\n        resolve({\r\n          shake: action\r\n        })\r\n      }, (item) => {\r\n        progressArray[idx * 2] = item.loaded / item.total;\r\n        onProgress();\r\n      }, (err) => {\r\n        console.log(err);\r\n        progressArray[idx * 2] = 1;\r\n        onProgress();        \r\n        reject(err);\r\n      });\r\n    })\r\n    const flipPromise = new Promise((resolve, reject) => {\r\n      loader.load(pan[1], (object) => {\r\n        // const mixer = new THREE.AnimationMixer( panObject );\r\n        object.animations[ 0 ][\"tracks\"].forEach(track => {\r\n          track['name'] = currentPan['tracksRename'][track['name']];\r\n        })\r\n        const action = mixer.clipAction( object.animations[ 0 ] );\r\n        action.play();\r\n        resolve({\r\n          flip: action\r\n        })\r\n      }, (item) => {\r\n        progressArray[idx * 2 + 1] = item.loaded / item.total;\r\n        onProgress();\r\n      }, (err) => {\r\n        console.log(err);\r\n        progressArray[idx * 2 + 1] = 1;\r\n        onProgress();\r\n        reject(err);\r\n      });\r\n    })\r\n\r\n    mixersArray.push(Promise.all([shakePromise, flipPromise]).then(results => {\r\n      const actions = {\r\n        ...results[0],\r\n        ...results[1]\r\n      };      \r\n      mixer.addEventListener( 'loop', onLoopFinished );\r\n      function onLoopFinished( event ) {\r\n        if ( event.action === actions['shake'] ) {\r\n          // mixer.removeEventListener( 'loop', onLoopFinished );\r\n          executeCrossFade(actions['shake'], actions['flip'], 1);\r\n        } else {\r\n          executeCrossFade(actions['flip'], actions['shake'], 1);\r\n        }\r\n      }\r\n      return {\r\n        name: currentPan['panName'],\r\n        mixer: mixer,\r\n        actions: actions\r\n      }\r\n    }))\r\n  })\r\n  return Promise.all(mixersArray);\r\n}\r\n\r\n\r\nconst KitchenViewer = ({\r\n  enableSAOPass = false\r\n}) => {\r\n  const [threeObjects, setThreeObjects] = useState({\r\n    scene: null,\r\n    camera: null,\r\n    containerEl: null,\r\n    renderer: null,\r\n    orbitControl: null,\r\n    raycaster: null,\r\n    clock: null,\r\n    mixer: null,\r\n  });\r\n  const [pansAnimation, setPansAnimation] = useState(null);\r\n  const [playingSteps, setPlayingSteps] = useState(0);\r\n  const [animatePan, setAnimatePan] = useState(0);\r\n  const [roomLoaded, setRoomLoaded] = useState(null);\r\n  const [textureLoaded, setTextureLoaded] = useState([]);\r\n  const [windowSize, setWindowSize] = useState([window.innerWidth, window.innerHeight]);\r\n  const [fpsTimer, setFpsTimer] = useState(Date.now());\r\n  let containerEl = null;\r\n  let animationFrame = null;\r\n  const setContainerEl = (ref) => containerEl = ref;\r\n  const initScene = () => {\r\n    const scene = new THREE.Scene();\r\n    const camera = new THREE.PerspectiveCamera( 36, containerEl.offsetWidth / containerEl.offsetHeight, 1, 1000 );\r\n    // camera.position.set(49, 274, -214);\r\n    // maybe use an animation clip to control the camera later\r\n    camera.position.set(0, 240, -150);\r\n    // camera.rotation.set(90, 0, 0);\r\n    camera.lookAt(0, 0, 120);\r\n    camera.useTarget = false;\r\n    camera.updateProjectionMatrix();\r\n    \r\n    // const light = new THREE.DirectionalLight(0xFFFFFF, 1);\r\n    // light.position.set(50, 100, 100);\r\n    // scene.add(light);\r\n\r\n    // light.position.set(50, 100, 100);\r\n    // const light = new THREE.AmbientLight(0xFFFFFF, 0.1);\r\n    // scene.add(light);\r\n\r\n    const renderer = new THREE.WebGLRenderer({antialias: true});\r\n    renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize( containerEl.offsetWidth, containerEl.offsetHeight );\r\n    renderer.setClearColor( 0xcccccc, 1 );\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.needsUpdate = true;\r\n    containerEl.appendChild( renderer.domElement );\r\n\r\n    // add control\r\n    const orbitControl = new OrbitControls( camera, renderer.domElement );\r\n    orbitControl.target.z = 120;\r\n\r\n    const clock = new THREE.Clock();\r\n\r\n    const loader = new FBXLoader();\r\n    // let mixer = null;\r\n    loader.load(fbxUrl, (object) => {\r\n      addShadowToChild(object, scene);\r\n      scene.add(object);\r\n      setRoomLoaded(object);\r\n      // turn the cooker face material to white\r\n      const pansArray = object.children.filter((obj) => obj.name.startsWith(\"frying_pan_\"));\r\n      pansArray.forEach(panObj => {\r\n        const cookerFace = panObj.children.find((panMesh) => panMesh.name.toLowerCase().startsWith('induction_cooker_') && panMesh.name.endsWith('2'));\r\n        cookerFace.material.color = new THREE.Color(0xffffff);\r\n      })\r\n    }, (item) => {\r\n      // console.log( item, loaded, total );\r\n      console.log(item.loaded / item.total * 100 + '%');\r\n    }, (err) => {\r\n      console.log(err);\r\n    });\r\n    \r\n    const textureLoader = new THREE.TextureLoader();\r\n    const meatTextures = [\r\n      textureLoader.load(meatUrl),\r\n      textureLoader.load(mildMeatUrl),\r\n      textureLoader.load(welldoneMeatUrl)\r\n    ];\r\n    setTextureLoaded(meatTextures);\r\n\r\n    // postprocessing sao\r\n    // https://threejs.org/examples/jsm/postprocessing/EffectComposer.js\r\n    let composer = null;\r\n    if (enableSAOPass) {\r\n      composer = new EffectComposer( renderer );\r\n      const renderPass = new RenderPass( scene, camera );\r\n      composer.addPass( renderPass );\r\n      const saoPass = new SAOPass( scene, camera, false, true );\r\n      composer.addPass( saoPass );\r\n      // debugger\r\n      // default params for the saoPass\r\n      saoPass.params.output = SAOPass.OUTPUT.Default;\r\n      saoPass.params.saoBias = 0.5;\r\n      saoPass.params.saoIntensity = 0.5;\r\n      saoPass.params.saoScale = 200;\r\n      saoPass.params.saoKernelRadius = 15;\r\n      saoPass.params.saoMinResolution = 0;\r\n      saoPass.params.saoBlur = true;\r\n      saoPass.params.saoBlurRadius = 8;\r\n      saoPass.params.saoBlurStdDev = 4;\r\n      saoPass.params.saoBlurDepthCutoff = 0.01;\r\n    }\r\n\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n    // THREE.BasicShadowMap = 0;\r\n    // THREE.PCFShadowMap = 1;\r\n    // THREE.PCFSoftShadowMap = 2;\r\n    renderer.shadowMap.needsUpdate = true;\r\n\r\n    // renderer.vr.enabled = true;\r\n    setThreeObjects({\r\n      scene: scene,\r\n      camera: camera,\r\n      containerEl: containerEl,\r\n      renderer: renderer,\r\n      orbitControl: orbitControl,\r\n      // raycaster: raycaster,\r\n      clock: clock,\r\n      composer: composer,\r\n    })\r\n  }\r\n\r\n  const loadPans = () => {\r\n    pansLoader(roomLoaded).then(result => {\r\n      setPansAnimation(result);\r\n    });\r\n      \r\n  }\r\n  const update = () => {\r\n    animationFrame = requestAnimationFrame(update);\r\n    if (pansAnimation) {\r\n      const delta = threeObjects.clock.getDelta();\r\n      for (let i = 0; i < pansAnimation.length; i++) {\r\n        const mixer = pansAnimation[i]['mixer'];\r\n        if (mixer) {\r\n          mixer.update(delta);\r\n        }\r\n      }\r\n    }\r\n    threeObjects.orbitControl.update();\r\n    // mac seems too lag for the sao pass rendering\r\n    if (enableSAOPass && threeObjects.composer) {\r\n      threeObjects.composer.render();\r\n    } else {\r\n      threeObjects.renderer.render( threeObjects.scene, threeObjects.camera );\r\n    }\r\n  };\r\n  const onResize = () => {\r\n    threeObjects.camera.aspect = threeObjects.containerEl.offsetWidth / threeObjects.containerEl.offsetHeight;\r\n    threeObjects.camera.updateProjectionMatrix();\r\n    threeObjects.renderer.setSize( threeObjects.containerEl.offsetWidth, threeObjects.containerEl.offsetHeight );\r\n  }\r\n  useEffect(() => {\r\n    initScene();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (animationFrame)\r\n      cancelAnimationFrame(animationFrame);\r\n    if (threeObjects.scene) {\r\n      animationFrame = requestAnimationFrame(update);\r\n      // update();\r\n    }\r\n    return () => {\r\n      if (animationFrame) {\r\n        cancelAnimationFrame(animationFrame);\r\n      }\r\n    }\r\n  }, [threeObjects, pansAnimation]);\r\n\r\n  useEffect(() => {\r\n    if (roomLoaded) {\r\n      loadPans();\r\n    }\r\n  }, [roomLoaded])\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', onResize);\r\n    return () => {\r\n      window.removeEventListener('resize', onResize);\r\n    }\r\n  }, [threeObjects])\r\n  return <div ref={setContainerEl}\r\n    className=\"threeCanvas\"\r\n  />;\r\n}\r\n\r\nexport default KitchenViewer;\r\n","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationA_shake.0f9bee90.fbx\";","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport routes from 'globals/routes';\r\n\r\nconst IndexPage = () => {\r\n  return <ul className=\"client\">\r\n    <li><Link to={routes.fbxViewer}>Windows Animation</Link></li>\r\n    <li><Link to={routes.kitchenViewer}>Kitchen Animation</Link></li>\r\n    <li><Link to={routes.homePage}>Game</Link></li>\r\n    <li><Link to={routes.touchTableViewer}>Touch Table Testing</Link></li>\r\n    <li><Link to={routes.svgAnimator}>svg Testing</Link></li>\r\n  </ul>\r\n}\r\n\r\nexport default IndexPage;","import React, {useState, useEffect} from 'react';\r\nimport routes from 'globals/routes';\r\n\r\nconst TouchTableViewer = () => {\r\n  const [targetWinSize, setTargetWinSize] = useState([1920, 1080]);\r\n  const [winSize, setWinSize] = useState([window.innerWidth, window.innerHeight]);\r\n  const [winScale, setWinScale] = useState(1);\r\n  useEffect(() => {\r\n    window.addEventListener('resize', () => {\r\n      setWinSize([window.innerWidth, window.innerHeight]);\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    setWinScale(\r\n      Math.min((window.innerWidth) / targetWinSize[0], (window.innerHeight) / targetWinSize[1])\r\n    );\r\n  }, [winSize, targetWinSize])\r\n  return <div style={{\r\n    width: '100%',\r\n    height: '100%',\r\n    overflow: 'hidden'\r\n  }}>\r\n    <iframe src={`#${routes.touchTable}`} style={{\r\n      width: targetWinSize[0],\r\n      height: targetWinSize[1],\r\n      transform: `scale(${winScale})`,\r\n      transformOrigin: 'top left',\r\n      overflow: 'hidden',\r\n      border: 0,\r\n      transition: 'all 0.3s'\r\n    }} />\r\n    <div\r\n      style={{\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n        bottom: 15,\r\n        right: 15,\r\n        cursor: 'pointer'\r\n      }}\r\n      onClick={()=>{\r\n        setTargetWinSize((prevTargerWinSize) => {\r\n          if (prevTargerWinSize[0] === 3840) {\r\n            return [1920, 1080];\r\n          } else {\r\n            return [3840, 2160];\r\n          }\r\n        })\r\n      }}\r\n    >\r\n      current monitor<br />resolution:<br />\r\n      {`${targetWinSize[0]} x ${targetWinSize[1]} `}\r\n    </div>\r\n  </div>;\r\n};\r\n\r\nexport default TouchTableViewer;","import React from 'react';\r\nimport {useState, useEffect} from 'react';\r\nconst App = (props) => {\r\n  const [fps, setFps] = useState(30);\r\n  let containerEl;\r\n  let canvasEl;\r\n  let animationFrame;\r\n  const setContainerEl = (ref) => containerEl = ref;\r\n  const setCanvasEl = (ref) => canvasEl = ref;\r\n  const draw = () => {\r\n\r\n  }\r\n  const update = () => {\r\n    // the animation step\r\n    animationFrame = setTimeout(() => update(), 1000 / fps);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // initScene();\r\n  }, []);\r\n  \r\n  return <div ref={setContainerEl}>\r\n    <canvas ref={setCanvasEl}/>\r\n  </div>;\r\n}\r\n\r\nexport default App;","import React, {useEffect, useState, useRef} from 'react';\r\nimport finder from '@medv/finder';\r\n\r\nimport './svgAnimator.css';\r\nimport './custom-inputbox.css';\r\nconst SvgAnimator = (props) => {\r\n  const [svgEl, setSvgEl] = useState(null);\r\n  const [elList, setElList] = useState([]);\r\n  const [clickedEl, setClickedEl] = useState(null);\r\n  const [clickedElInfo, setClickedElInfo] = useState({});\r\n  const [svgStr, setSvgStr] = useState('');\r\n  const [curveStr, setCurveStr] = useState('0,0,1,1');\r\n  // const [clickedQueue, setclickedQueue] = useState(false);\r\n  useEffect(() => {\r\n    const htmlEl = document.querySelector('html');\r\n    htmlEl.addEventListener('dragover', dragoverHandler);\r\n    htmlEl.addEventListener('drop', dropHandler);\r\n    return () => {\r\n      const htmlEl = document.querySelector('html');\r\n      htmlEl.removeEventListener('dragover', dragoverHandler);\r\n      htmlEl.removeEventListener('drop', dropHandler)\r\n    }\r\n  }, [])\r\n  const dragoverHandler = (e) => {\r\n    e.preventDefault();\r\n  }\r\n  const dropHandler = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    let file = null;\r\n    if (e.dataTransfer.items) {\r\n      // Use DataTransferItemList interface to access the file(s)\r\n      // for (var i = 0; i < e.dataTransfer.items.length; i++) {\r\n        // If dropped items aren't files, reject them\r\n        if (e.dataTransfer.items[0].kind === 'file') {\r\n          file = e.dataTransfer.items[0].getAsFile();\r\n        }\r\n      // }\r\n    } else {\r\n      // Use DataTransfer interface to access the file(s)\r\n      for (var i = 0; i < e.dataTransfer.files.length; i++) {\r\n        file = e.dataTransfer.files[0];\r\n      }\r\n    }\r\n    if (file.type === 'image/svg+xml') {\r\n      // update svg\r\n      const reader = new FileReader();\r\n\r\n      reader.readAsBinaryString(file);\r\n\r\n      reader.onloadend = function(){\r\n        setSvgStr(reader.result);\r\n      }\r\n      setClickedEl(null);\r\n      setElList([]);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (svgEl) {\r\n      // https://hackernoon.com/htmlcollection-nodelist-and-array-of-objects-da42737181f9\r\n      // node list to array\r\n      // Array.from(NodeList)\r\n      // Array.prototype.slice.call(NodeList)\r\n      // [...NodeList]\r\n      // const ElArray = Array.from(svgEl.querySelectorAll('*'));\r\n      // ElArray.forEach(...)\r\n      // or just keep iterable\r\n      // console.log('building');\r\n      const ElListWithSelector = [];\r\n      const ElList = svgEl.querySelectorAll('*');\r\n      svgEl.addEventListener('click', svgOnClick);\r\n      for (let el of ElList) {\r\n        if (el.getBBox) {\r\n          el.addEventListener('click', elOnClick);\r\n          const boundBox = el.getBBox();\r\n          el.style.transformOrigin = `${boundBox.x + boundBox.width / 2}px ${boundBox.y + boundBox.height / 2}px`;\r\n          const selector = finder(el, {\r\n            root: svgEl\r\n          })\r\n          el.data = {selector: selector};\r\n          ElListWithSelector.push({\r\n            selector: selector,\r\n            element: el\r\n          });\r\n        }\r\n      }\r\n      setElList(ElListWithSelector);\r\n    }\r\n    return () => {\r\n      if (svgEl) {\r\n        svgEl.removeEventListener('click', svgOnClick);\r\n        elList.forEach(item => item.element.removeEventListener('click', elOnClick));\r\n        setClickedEl(null);\r\n        setElList([]);\r\n      }\r\n    }\r\n  }, [svgEl]);\r\n\r\n  const svgOnClick = (e) => {\r\n    e.stopPropagation();\r\n    setClickedEl(null);\r\n  }\r\n  const elOnClick = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setClickedEl(e.currentTarget);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (svgEl && clickedEl) {\r\n      const selectorStr = finder(clickedEl, {\r\n        root: svgEl\r\n      })\r\n      clickedEl.classList.add('selected');\r\n      let parentNode = clickedEl.parentNode;\r\n      while (parentNode !== svgEl && parentNode !== document.body) {\r\n        parentNode.classList.add('selected');\r\n        parentNode = parentNode.parentNode;\r\n      }\r\n      svgEl.classList.add('selecting');\r\n      /**\r\n       * try to get the element info\r\n       */\r\n      const elementInfo = {\r\n        selectorStr: selectorStr,\r\n        transformOrigin: window.getComputedStyle(clickedEl)['transformOrigin'],\r\n        x: clickedEl.getAttribute('x'),\r\n        y: clickedEl.getAttribute('y'),\r\n        width: clickedEl.getAttribute('width'),\r\n        height: clickedEl.getAttribute('height'),\r\n        animation: [\r\n          // {\r\n          //   calcMode: 'discrete|linear|spline', // timingMode\r\n          //   values: ['360', '0'], // keyframes\r\n          //   keySplines: '0 0 1 1', // timingFunction for spline only\r\n          //   type: 'translate|rotate|scale',\r\n          //   repeatCount: 'indefinite|n',\r\n          //   fill: 'remove|freeze', // status on complete\r\n          //   dur: '3s', // duration\r\n          //   begin: '0s', // delay\r\n          // }\r\n        ]\r\n      };\r\n      // https://stackoverflow.com/questions/3680876/using-queryselectorall-to-retrieve-direct-children\r\n      const animationEls = clickedEl.querySelectorAll(\":scope > animateTransform\");\r\n      Array.from(animationEls).forEach(animationEl => {\r\n        const animationAttrs = {\r\n          calcMode: animationEl.getAttribute('calcMode'),\r\n          values: animationEl.getAttribute('values'),\r\n          keySplines: animationEl.getAttribute('keySplines'),\r\n          type: animationEl.getAttribute('type'),\r\n          repeatCount: animationEl.getAttribute('repeatCount'),\r\n          fill: animationEl.getAttribute('fill'),\r\n          dur: animationEl.getAttribute('dur'),\r\n          begin: animationEl.getAttribute('begin'),\r\n        };\r\n        elementInfo['animation'].push(animationAttrs);\r\n      })\r\n      setClickedElInfo(elementInfo);\r\n    } else if (svgEl) {\r\n      const elementInfo = {\r\n        selectorStr: '',\r\n      }\r\n      setClickedElInfo(elementInfo);\r\n      svgEl.classList.remove('selecting');\r\n    }\r\n    return () => {\r\n      if (svgEl && clickedEl) {\r\n        clickedEl.classList.remove('selected');\r\n        let parentNode = clickedEl.parentNode;\r\n        while (parentNode !== svgEl) {\r\n          parentNode.classList.remove('selected');\r\n          parentNode = parentNode.parentNode;\r\n        }\r\n      }\r\n    }\r\n  }, [svgEl, clickedEl]);\r\n\r\n  useEffect(() => {\r\n    if (svgStr) {\r\n      setSvgEl(document.querySelector('#svgAnimator .svgWrapper svg'));\r\n      // console.log(svgEl);\r\n    }\r\n  }, [svgStr]);\r\n  return <div id=\"svgAnimator\">\r\n    <div className=\"svgWrapper\">\r\n      {clickedEl && clickedElInfo['selectorStr']? \r\n        <div style={{\r\n          border: '2px solid #F00',\r\n          position: 'absolute',\r\n          top: clickedEl.getBoundingClientRect().y - 2,\r\n          left: clickedEl.getBoundingClientRect().x - 2,\r\n          width: clickedEl.getBoundingClientRect().width,\r\n          height: clickedEl.getBoundingClientRect().height,\r\n          pointerEvents: 'none'\r\n        }}>\r\n          <div style={{\r\n            position: 'absolute',\r\n            left: (clickedEl.getBoundingClientRect().width / clickedElInfo['width']) * clickedElInfo['transformOrigin'].split(' ')[0].replace('px',''),\r\n            top: (clickedEl.getBoundingClientRect().width / clickedElInfo['width']) * clickedElInfo['transformOrigin'].split(' ')[1].replace('px','')\r\n          }} />\r\n        </div>\r\n        :\r\n        null\r\n      }\r\n      <span dangerouslySetInnerHTML={{__html: svgStr}} />\r\n    </div>\r\n    <div className=\"editorWrapper\">\r\n      <div className=\"svgElements\">\r\n        <select onChange={(e) => {\r\n            {/* console.log(e.currentTarget.value); */}\r\n            const selected = elList.find(el => el.selector === e.currentTarget.value);\r\n            if (selected) {\r\n              setClickedEl(selected.element);\r\n            }\r\n          }}value={clickedEl? clickedEl.data.selector: \"\"}>\r\n          <option value=\"\">Click to select an element</option>\r\n          {elList.map((el, idx)=> <option key={idx} value={el.selector}>{el.element.tagName}</option>)}\r\n        </select>\r\n      </div>\r\n      {clickedElInfo['selectorStr'] && \r\n        <div className=\"svgAnimation\">\r\n          <div className=\"custom-inputbox filled\">\r\n            <label>unique selector</label>\r\n            <input readOnly value={clickedElInfo['selectorStr']} />\r\n          </div>\r\n          <div className=\"custom-inputbox filled\">\r\n            <label>transformOrigin</label>\r\n            <input readOnly value={clickedElInfo['transformOrigin']} />\r\n          </div>\r\n          <div className=\"svgAnimations\">\r\n            {clickedElInfo['animation'].map((animationData, idx) => {\r\n              return <div className=\"animation\">\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>type</label>\r\n                  <input value={animationData['type']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>timingMode</label>\r\n                  <input value={animationData['calcMode']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>timingFunction</label>\r\n                  <input value={animationData['keySplines']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>start</label>\r\n                  <input value={animationData['begin']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>duration</label>\r\n                  <input value={animationData['dur']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>repeatCount</label>\r\n                  <input value={animationData['repeatCount']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>onComplete behaviour</label>\r\n                  <input value={animationData['fill']} />\r\n                </div>\r\n                <div className=\"custom-inputbox filled\">\r\n                  <label>animation values</label>\r\n                  <input value={animationData['values']} />\r\n                </div>\r\n                <svg\r\n                  style={{\r\n                    width: 100,\r\n                    height: 200,\r\n                    overflow: 'visible'\r\n                  }}\r\n                  viewBox=\"0 0 1 1\"\r\n                >\r\n                  <rect x=\"0\" y=\"0\" width=\"1\" height=\"1\" fill=\"none\" stroke=\"#DDD\" vectorEffect=\"non-scaling-stroke\" />\r\n                  <path d={`m0,0 C${animationData['keySplines']} 1,1`} style={{\r\n                    stroke: '#000',\r\n                    fill: 'none',\r\n                    strokeWidth: 2,\r\n                    transformOrigin: 'center',\r\n                    transform: 'scaleY(-1)'\r\n                  }} vectorEffect=\"non-scaling-stroke\" />\r\n                </svg>\r\n                <input readOnly value={animationData['keySplines']} />  \r\n              </div>;\r\n            })}\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nexport default SvgAnimator;\r\n\r\n/** some svg attributes and functions\r\n \r\n<animateTransform attributeName=\"transform\" type=\"rotate\" repeatCount=\"10\" begin=\"5s\" dur=\"5s\" values=\"360 24.45 23.45;0 24.45 23.45\"></animateTransform>\r\n\r\n<animateTransform \r\nattributeName=\"transform\" \r\nid=\"el_st0_nth_child_4_\" \r\ntype=\"rotate\" \r\nrepeatCount=\"1\" \r\nbegin=\"1s;el_st0_nth_child_4_.end+7s\" \r\ndur=\"1s\" \r\nvalues=\"360 -1 -1;0 -1 -1\"\r\nfill=\"freeze|remove\"\r\ncalcMode=\"spline\"\r\nkeySplines=\"0.4 0 0.2 1\" <!-- https://cubic-bezier.com/ -->\r\n></animateTransform>\r\n\r\nsvg.pauseAnimations()\r\nsvg.unpauseAnimations()\r\nsvg.setCurrentTime(0)\r\n\r\nanimation.beginElementAt(time)\r\nanimation.beginElement()\r\nanimation.endElement()\r\n\r\nelement.getBBox()\r\n\r\n\r\n */","import React, {useEffect, useState, useRef} from 'react';\r\nimport {TweenMax, Back} from 'gsap';\r\nimport Hammer from 'react-hammerjs';\r\n\r\nimport './touchTableInstance.css';\r\n\r\n\r\n/**\r\n * TouchTableInstance\r\n * @param {float} props.currentRotate\r\n * @param {[float, float]} props.currentXY\r\n * \r\n * TODO: reposition the instance when outside boundary\r\n */\r\nconst TouchTableInstance = (props) => {\r\n  const [msg, setMsg] = useState(\"event message\");\r\n  const [scale, setScale] = useState(1);\r\n  const [scalingFactor, setScalingFactor] = useState(0);\r\n  const [angle, setAngle] = useState(props.currentRotate || 0);\r\n  const [rotatingAngle, setRotatingAngle] = useState(props.currentRotate || 0);\r\n  const [currentXY, setCurrentXY] = useState(props.currentXY || [0,0]);\r\n  const [previousXY, setPreviousXY] = useState(props.currentXY || [0,0]);\r\n  const handlePinch = (event) => {\r\n    const newScale = Math.min(Math.max(scale * event.scale, 1), 2);\r\n    setScalingFactor(newScale);\r\n    setCurrentXY([\r\n      previousXY[0] + event.deltaX,\r\n      previousXY[1] + event.deltaY\r\n    ])\r\n  }\r\n  const handlePinchEnd = (event) => {\r\n    const newScale = Math.min(Math.max(scale * event.scale, 1), 2);\r\n    setScale(newScale);\r\n  }\r\n  const handleRotateStart = (event) => {\r\n    setAngle(event.rotation - rotatingAngle);\r\n  }\r\n  const handleRotateMove = (event) => {\r\n    setRotatingAngle( event.rotation - angle );\r\n  }\r\n  const enablePan = useRef(false);\r\n  const handlePanEnd = (event) => {\r\n    if (enablePan.current) {\r\n      enablePan.current = false;\r\n      // console.log('disablePan');\r\n      setPreviousXY([\r\n        previousXY[0] + event.deltaX,\r\n        previousXY[1] + event.deltaY\r\n      ])\r\n    }\r\n  }\r\n  const handlePan = (event) => {\r\n    // pan on scrollable area will have weird behaviour\r\n    if (event.type === \"pan\" && enablePan.current) {\r\n      // console.log(event.type);\r\n      setCurrentXY([\r\n        previousXY[0] + event.deltaX,\r\n        previousXY[1] + event.deltaY\r\n      ])\r\n    }\r\n  }\r\n  const handlePanStart = (event) => {\r\n    if (event.target.classList.contains('noPanning') || (event.target.offsetParent && event.target.offsetParent.classList.contains('noPanning'))) {\r\n      enablePan.current = false;\r\n      // console.log('noPan');\r\n    } else {\r\n      enablePan.current = true;\r\n      // console.log('enablePan');\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    const aniScale = {scale: 0};\r\n    TweenMax.to(aniScale, 0.4, {\r\n      scale: 1,\r\n      ease: Back.easeOut,\r\n      onUpdate: () => {\r\n        setScalingFactor(aniScale.scale)\r\n      },\r\n      onComplete: () => {\r\n        setScale(1)\r\n      }\r\n    })\r\n  }, [])\r\n  const rotateInstance = () => {\r\n    setAngle(angle + 12.5);\r\n    setRotatingAngle( rotatingAngle + 12.5 );\r\n  }\r\n  const closeInstance = () => {\r\n    const aniScale = {scale: scalingFactor};\r\n    TweenMax.to(aniScale, 0.2, {\r\n      scale: 0,\r\n      ease: Back.easeIn,\r\n      onUpdate: () => {\r\n        setScalingFactor(aniScale.scale)\r\n      },\r\n      onComplete: () => {\r\n        props.closeFunc()\r\n      }\r\n    })\r\n  }\r\n  return (\r\n  <div className=\"touchTableInstance\" \r\n    style={{\r\n      transform: `translate(${currentXY[0]}px,${currentXY[1]}px) rotate(${rotatingAngle}DEG) scale(${scalingFactor})`\r\n    }}\r\n  >\r\n    <Hammer\r\n      onPinch={handlePinch}\r\n      onPinchEnd={handlePinchEnd}\r\n      onRotateStart={handleRotateStart}\r\n      onRotateMove={handleRotateMove}\r\n      onPanStart={handlePanStart}\r\n      onPan={handlePan}\r\n      onPanEnd={handlePanEnd}\r\n      options={{\r\n        recognizers: {\r\n          pinch: { enable: true },\r\n          rotate: { enable: true },\r\n          pan: { threshold: 1 }\r\n        }\r\n      }}\r\n    >\r\n      <div style={{\r\n        height: '100%'\r\n      }}>\r\n    \r\n        <div className=\"controlMenu\">\r\n        <div className=\"rotateButton\" \r\n            onClick={rotateInstance}\r\n          >O</div>\r\n          <div className=\"closeButton\" \r\n            onClick={closeInstance}\r\n          >X</div>\r\n        </div>\r\n        <div className=\"contentPanel noPanning\">\r\n          <div className=\"categoryLayer1\">\r\n            <ul className=\"categoryLayer1List\">\r\n              <li className=\"categoryLayer1Item\">K. Wah</li>\r\n              <li className=\"categoryLayer1Item\">Dr. Lui Che Woo</li>\r\n              <li className=\"categoryLayer1Item\">Lui Che Woo Prize</li>\r\n              <li className=\"categoryLayer1Item\">Gallery</li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"categoryLayer2\">\r\n            <ul className=\"categoryLayer2List\">\r\n              <li className=\"categoryLayer2Item\">About K. Wah</li>\r\n              <li className=\"categoryLayer2Item\">Properties</li>\r\n              <li className=\"categoryLayer2Item\">Chairman & Founder</li>\r\n              <li className=\"categoryLayer2Item\">CSR</li>\r\n              <li className=\"categoryLayer2Item\">Achievement</li>\r\n              <li className=\"categoryLayer2Item\">60 th Anniversary</li>\r\n              <li className=\"categoryLayer2Item\">Global Presence</li>\r\n              <li className=\"categoryLayer2Item\">Construction Materials</li>\r\n              <li className=\"categoryLayer2Item\">Hospitality</li>\r\n              <li className=\"categoryLayer2Item\">Entertainment & Leisure</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Hammer>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default TouchTableInstance;\r\n","import React, {useEffect, useState, useRef, useCallback} from 'react';\r\n\r\nimport Hammer from 'react-hammerjs';\r\n\r\nimport TouchTableInstance from 'components/touchTableInstance';\r\n\r\nimport clickSound from 'media/sound/click.mp3';\r\n\r\nimport './touchTable.css';\r\n\r\nconst TouchTable = () => {\r\n  const [instances, setInstances] = useState([]);\r\n  useEffect(() => {\r\n    const audioInstance = new Audio(clickSound);\r\n    const playClickSound = () => {\r\n      audioInstance.play();\r\n    }\r\n    document.addEventListener('click', playClickSound);\r\n    return () => {\r\n      document.removeEventListener('click', playClickSound);\r\n    }\r\n  }, [])\r\n  const createInstance = (event) => {\r\n    if (event.target.classList.contains('touchTableFrame')) {\r\n      setInstances((prevInstance) => {\r\n        const removeNewInstance = () => {\r\n          // remove itself\r\n          removeInstance(newInstance);\r\n        }\r\n        const containerWidth = event.target.offsetWidth;\r\n        const containerHeight = event.target.offsetHeight;\r\n        let instanceRotated = 0;\r\n        // rotation\r\n        const rotateAngleX = Math.atan(16 / 9);\r\n        const rotateAngleY = Math.PI / 2 - rotateAngleX;\r\n        const rotatedPositionX = event.center.x * Math.cos(rotateAngleX) - event.center.y * Math.sin(rotateAngleX);\r\n        const rotatedPositionY = (containerWidth / 2 - event.center.x) * Math.sin(rotateAngleY) + (containerHeight / 2 - event.center.y) * Math.cos(rotateAngleY);\r\n        if (rotatedPositionX < 0) {\r\n          if (rotatedPositionY < 0) {\r\n            instanceRotated = 0;\r\n          } else {\r\n            instanceRotated = 90;\r\n          }\r\n        } else {\r\n          if (rotatedPositionY < 0) {\r\n            instanceRotated = -90;\r\n          } else {\r\n            instanceRotated = 180;\r\n          }\r\n        }\r\n        /*\r\n        // simple distance \r\n        const distL = event.center.x;\r\n        const distR = containerWidth - event.center.x;\r\n        const distT = event.center.y;\r\n        const distB = containerHeight - event.center.y;\r\n        const minDist = Math.min(distL, distR, distT, distB);\r\n        console.log(distL, distR, distT, distB);\r\n        switch (minDist) {\r\n          case distL:\r\n            instanceRotated = 90;\r\n            break;\r\n          case distR:\r\n            instanceRotated = -90;\r\n            break;\r\n          case distT:\r\n            instanceRotated = 180;\r\n            break;\r\n          case distB:\r\n          default:\r\n            instanceRotated = 0;\r\n            break;\r\n        }\r\n        */\r\n        const pointerX = event.center.x;\r\n        const pointerY = event.center.y;\r\n        let instanceWidth = 640;\r\n        let instanceHeight = 360;\r\n        let instanceX = pointerX - instanceWidth / 2;\r\n        let instanceY = pointerY - instanceHeight / 2;\r\n        // check boundary\r\n        if (Math.abs(instanceRotated) === 90) {\r\n          [instanceWidth, instanceHeight] = [instanceHeight, instanceWidth];\r\n          if (instanceX < (instanceWidth - instanceHeight) / 2) {\r\n            instanceX = (instanceWidth - instanceHeight) / 2;\r\n          }\r\n          if (instanceX + (instanceHeight + instanceWidth) / 2 > containerWidth) {\r\n            instanceX = containerWidth - (instanceHeight + instanceWidth) / 2;\r\n          }\r\n\r\n          if (instanceY < (instanceHeight - instanceWidth) / 2) {\r\n            instanceY = (instanceHeight - instanceWidth) / 2;\r\n          }\r\n          if (instanceY + (instanceWidth + instanceHeight) / 2 > containerHeight) {\r\n            instanceY = containerHeight - (instanceWidth + instanceHeight) / 2;\r\n          }\r\n        } else {\r\n          if (instanceX + instanceWidth > containerWidth) {\r\n            instanceX = containerWidth - instanceWidth;\r\n          }\r\n          if (instanceX < 0) {\r\n            instanceX = 0;\r\n          }\r\n          if (instanceY + instanceHeight > containerHeight) {\r\n            instanceY = containerHeight - instanceHeight;\r\n          }\r\n          if (instanceY < 0) {\r\n            instanceY = 0;\r\n          }\r\n        }\r\n        const newInstance = <TouchTableInstance \r\n          key={Date.now()} \r\n          closeFunc={removeNewInstance} \r\n          currentXY={[instanceX, instanceY]}\r\n          currentRotate={instanceRotated}\r\n        />;\r\n        return [...prevInstance, newInstance];\r\n      })\r\n    }\r\n  }\r\n  const removeInstance = (instance) => {\r\n    setInstances((prevInstance) => {\r\n      const instanceIndex = prevInstance.indexOf(instance);\r\n      // console.log(instanceIndex);\r\n      return prevInstance.slice(0, instanceIndex).concat(prevInstance.slice(instanceIndex+1)); // , <TouchTableInstance currentXY={[event.center.x - 250, event.center.y - 100]} />];\r\n    })\r\n  }\r\n  return (\r\n  <Hammer onPress={createInstance}>\r\n    <div className=\"touchTableFrame\" onMouseMove={(event) => {\r\n      {/* console.log(event); */}\r\n      {/* const rotateAngleX = Math.atan(16 / 9);\r\n      const rotateAngleY = Math.PI / 2 - rotateAngleX;\r\n      const rotatedPositionX = event.clientX * Math.cos(rotateAngleX) - event.clientY * Math.sin(rotateAngleX);\r\n      const rotatedPositionY = (event.target.offsetWidth / 2 - event.clientX) * Math.sin(rotateAngleY) + (event.target.offsetHeight / 2 - event.clientY) * Math.cos(rotateAngleY);\r\n      console.log(rotatedPositionX, rotatedPositionY);\r\n      if (rotatedPositionX < 0) {\r\n          if (rotatedPositionY < 0) {\r\n            console.log(0,0);\r\n          } else {\r\n            console.log(0,1);\r\n          }\r\n        } else {\r\n          if (rotatedPositionY < 0) {\r\n            console.log(1,0);\r\n          } else {\r\n            console.log(1,1);\r\n          }\r\n        } */}\r\n      }}\r\n    >\r\n      <div className=\"debugFrame rotation\"></div>\r\n      <div className=\"debugFrame distance\"></div>\r\n      {instances}\r\n    </div>\r\n  </Hammer>\r\n  );\r\n}\r\n\r\nexport default TouchTable;\r\n","import React from 'react';\r\nimport {generatePath} from 'react-router-dom';\r\nimport {useState, useEffect} from 'react';\r\nimport io from 'socket.io-client';\r\nimport QRCode from 'qrcode';\r\n\r\nimport routes from 'globals/routes';\r\n\r\nimport {serverPath, serverPort} from 'globals/config';\r\n\r\nimport ShakeGame from 'containers/shakeGame';\r\nimport CreateGame from 'pages/createGame';\r\n\r\nimport KitchenViewer from 'pages/kitchenViewer';\r\n\r\nimport './homePage.css';\r\n\r\n// const serverPath = 'https://socketio-testing.herokuapp.com';\r\n// const serverPort = 443;\r\n\r\nconst App = (props) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [playersInfo, setPlayersInfo] = useState([]);\r\n  useEffect(() => {\r\n    // const serverPath = 'http://localhost';\r\n    // get the ip and port from ipc\r\n    // const socket = io(window.location.origin);\r\n    const serverUrl = `${serverPath}:${serverPort}`;\r\n    const socket = io(serverUrl);\r\n    setSocket(socket);\r\n    return () => {\r\n\r\n    }\r\n  }, []);\r\n  const startGame = () => {\r\n    socket.emit('startGame');\r\n  }\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('connect', () => {\r\n        console.log('connected !');\r\n        socket.emit('createRoom');\r\n      });\r\n      socket.on('playersInfo', (playersInfo) => {\r\n        for (let i = 0; i < playersInfo.length; i++) {\r\n          const playerIdx = i;\r\n          const playerInfo = playersInfo[playerIdx];\r\n          // const joinGamePath = window.location.origin + '/#' + routes.joinGame.replace(':userId', playerInfo['playerId']);\r\n          const joinGamePath = window.location.origin + window.location.pathname + '#' + generatePath(routes.joinGame, {userId: playerInfo['playerId']});\r\n          QRCode.toDataURL(\r\n            joinGamePath,\r\n            {\r\n              width: 300,\r\n              color: {\r\n                dark: '#000000FF',\r\n                light: '#FFFFFFFF'\r\n              },\r\n              margin: 0,\r\n            }\r\n          )\r\n          .then(url => {\r\n            setPlayersInfo((prevPlayersInfo) => {\r\n              const newPlayerInfo = [...prevPlayersInfo];\r\n              newPlayerInfo[playerIdx] = {\r\n                ...playerInfo,\r\n                url: joinGamePath,\r\n                img: url\r\n              };\r\n              return newPlayerInfo;\r\n            })\r\n            // this.qrcodeImage[idx][platform].setAttribute('src', url);\r\n          })\r\n        }\r\n      })\r\n      socket.on('*', (msg) => {\r\n        console.log(msg);\r\n      })\r\n      socket.on('playerInfo', (playerInfo) => {\r\n        console.log(playerInfo);\r\n      })\r\n    }\r\n  }, [socket]);\r\n\r\n  return <div className=\"page homePage\">\r\n    {/* display the box of the player recieved from server */}\r\n    <div className=\"qrcodeLayer\">\r\n      {playersInfo.map(playerInfo => {\r\n        return <div key={playerInfo['url']} className={`player-block ${playerInfo.joined? 'joined': 'waiting'}`}>\r\n          {/* https://mathiasbynens.github.io/rel-noopener/ */}\r\n          <div className=\"playerCard waiting\">\r\n            <a href={playerInfo['url']} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              <img src={playerInfo['img']} alt={`player QRcode`} className=\"playerQrcode\" />\r\n            </a>\r\n          </div>\r\n          <div className=\"playerCard joined\">\r\n            JOINED\r\n          </div>\r\n          <div className=\"shakeCount\">{playerInfo.shakeCount}</div>\r\n        </div>;\r\n      })}\r\n    </div>\r\n    {/* <KitchenViewer /> */}\r\n    {/* <div className=\"startGameButton\" onClick={startGame}>Start Game!</div> */}\r\n  </div>;\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport {useState, useEffect, useCallback} from 'react';\r\n\r\n\r\n// https://www.raymondcamden.com/2017/04/25/using-device-motion-on-the-web\r\nconst UseDeviceMotion = (props) => {\r\n  const [threshold, setThreshold] = useState(45);\r\n  const [lastAccVec3, setLastAccVec3] = useState([null, null, null]);\r\n  const [moveCounter, setMoveCounter] = useState(0);\r\n  // const [shakeCounter, setShakeCounter] = useState(0);\r\n  \r\n  const onMotion = useCallback(\r\n    (event) => {\r\n      // event.alpha\r\n      // event.beta\r\n      // event.gamma\r\n      const {alpha, beta, gamma} = event;\r\n      //console.log('motion', acc);\r\n      // if (lastAccVec3[0] === null) {\r\n      //   setLastAccVec3([alpha, beta, gamma]);\r\n      //   return;\r\n      // }\r\n      // dunno why there exist some wrong result\r\n      //  - alpha, bata, gamma all zero randomly\r\n      if (!(alpha && beta && gamma)) { return; }\r\n      let deltaX = Math.abs(alpha - lastAccVec3[0]);\r\n      let deltaY = Math.abs(beta - lastAccVec3[1]);\r\n      let deltaZ = Math.abs(gamma - lastAccVec3[2]);\r\n    \r\n      if(deltaX + deltaY + deltaZ > threshold) {\r\n        setMoveCounter((prevMoveCounter) => {\r\n          return prevMoveCounter + 1;\r\n        })\r\n      } else {\r\n        setMoveCounter((prevMoveCounter) => {\r\n          return Math.max(0, prevMoveCounter - 1);\r\n        })\r\n      }\r\n      setLastAccVec3([alpha, beta, gamma]);\r\n    },\r\n    [threshold, lastAccVec3]\r\n  );\r\n  useEffect(() => {\r\n    if (props.threshold) {\r\n      setThreshold(props.threshold);\r\n    }\r\n    return () => {\r\n\r\n    }\r\n  }, [props.threshold])\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('deviceorientation', onMotion, false);\r\n    // console.log('addEventListener deviceorientation');\r\n    return () => {\r\n      window.removeEventListener('deviceorientation', onMotion, false);\r\n      // console.log('removeEventListener deviceorientation');\r\n    }\r\n  }, [onMotion])\r\n\r\n  useEffect(() => {\r\n    if(moveCounter > 2) {\r\n      console.log('SHAKE!!!');\r\n      // setShakeCounter((prevShakeCounter => {\r\n      //   return prevShakeCounter + 1;\r\n      // }));\r\n      if (props.onShake && typeof(props.onShake) === 'function') {\r\n        props.onShake();\r\n      }\r\n\t\t\tsetMoveCounter(0);\r\n\t\t}\r\n  }, [moveCounter, props]);\r\n\r\n  // return <div>\r\n  //   {lastAccVec3.map(v => v + ', ')}\r\n  // </div>;\r\n\r\n  // return shakeCounter;\r\n  return <div></div>;\r\n}\r\n\r\nexport default UseDeviceMotion;","import React from 'react';\r\nimport {useState, useEffect} from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nimport {serverPath, serverPort} from 'globals/config';\r\n\r\nimport UseDeviceMotion from 'components/useDeviceMotion';\r\n\r\nconst App = (props) => {\r\n  const STATUS = Object.freeze({\r\n    CONNECTING: 0, \r\n    IDLE: 1, \r\n    SHAKING: 2, \r\n    ENDGAME: 3,\r\n    INVALID: 4, \r\n  });\r\n  const [socket, setSocket] = useState(null);\r\n  const [playersInfo, setPlayersInfo] = useState([]);\r\n  // const [shakeCount, setShakeCount] = useState(0);\r\n  const [statusDisplay, setStatusDisplay] = useState(STATUS.CONNECTING);\r\n  let lastShakeTime = null;\r\n  useEffect(() => {\r\n    // const serverPath = 'http://localhost';\r\n    // get the ip and port from ipc\r\n    // const socket = io(window.location.origin);\r\n    const serverUrl = `${serverPath}:${serverPort}`;\r\n    const socket = io(serverUrl);\r\n    setSocket(socket);\r\n    return () => {\r\n\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('connect', () => {\r\n        console.log('connected !');\r\n        socket.emit('joinRoom', props.match.match.params.userId);\r\n        // wait join result msg from server\r\n      })\r\n      socket.on('playerStatus', (joinStatus) => {\r\n        setStatusDisplay(joinStatus.status);\r\n        // if (joinStatus.roomJoined) {\r\n        //   setStatusDisplay(STATUS.IDLE);\r\n        // } else {\r\n        //   setStatusDisplay(STATUS.INVALID);\r\n        // }\r\n      });\r\n      socket.on('*', (msg) => {\r\n        console.log(msg);\r\n      })\r\n    }\r\n  }, [socket]);\r\n  const onShake = () => {\r\n    /* send signal to server */\r\n    socket.emit('shake');\r\n    setStatusDisplay(STATUS.SHAKING);\r\n    if (lastShakeTime) {\r\n      clearTimeout(lastShakeTime);\r\n    }\r\n    lastShakeTime = setTimeout(() => {\r\n      setStatusDisplay(STATUS.IDLE);\r\n    },1000);\r\n  }\r\n  return <div>\r\n    {(() => {\r\n      switch (statusDisplay) {\r\n        /* case STATUS.IDLE:\r\n          return <div className=\"status statusIdle\">\r\n            Waiting for others players\r\n          </div>;\r\n        case STATUS.CONNECTING:\r\n          return <div className=\"status statusConnecting\">\r\n            Connecting\r\n          </div>; */\r\n        case STATUS.IDLE:\r\n        /* case STATUS.SHAKING: */\r\n          return <div className=\"status statusShaking\">\r\n            <UseDeviceMotion onShake={onShake} />\r\n            Keep Shaking\r\n          </div>;\r\n        case STATUS.INVALID:\r\n          return <div className=\"status statusInvalid\">\r\n            Game not found, please scan the QR code again\r\n          </div>;\r\n        case STATUS.ENDGAME:\r\n          return <div className=\"status statusGameend\">\r\n            Finished, thanks for playing.\r\n          </div>;\r\n      }\r\n    })()}\r\n  </div>;\r\n}\r\n\r\nexport default App;","/* three-orbitcontrols addendum */\r\nvar THREE = require('three');\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\n\r\nTHREE.OrbitControls = function (object, domElement) {\r\n  this.object = object;\r\n  this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\r\n\r\n  this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\r\n\r\n  this.target = new THREE.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\r\n\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\r\n\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n\r\n  this.minPolarAngle = 0; // radians\r\n\r\n  this.maxPolarAngle = Math.PI; // radians\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\r\n  this.minAzimuthAngle = -Infinity; // radians\r\n\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0; // Set to false to disable rotating\r\n\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0; // Set to false to disable panning\r\n\r\n  this.enablePan = true;\r\n  this.panSpeed = 1.0;\r\n  this.screenSpacePanning = false; // if true, pan in screen-space\r\n\r\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n  // Set to false to disable use of the keys\r\n\r\n  this.enableKeys = true; // The four arrow keys\r\n\r\n  this.keys = {\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    BOTTOM: 40\r\n  }; // Mouse buttons\r\n\r\n  this.mouseButtons = {\r\n    LEFT: THREE.MOUSE.LEFT,\r\n    MIDDLE: THREE.MOUSE.MIDDLE,\r\n    RIGHT: THREE.MOUSE.RIGHT\r\n  }; // for reset\r\n\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom; //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n    return spherical.phi;\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n    return spherical.theta;\r\n  };\r\n\r\n  this.saveState = function () {\r\n    scope.target0.copy(scope.target);\r\n    scope.position0.copy(scope.object.position);\r\n    scope.zoom0 = scope.object.zoom;\r\n  };\r\n\r\n  this.reset = function () {\r\n    scope.target.copy(scope.target0);\r\n    scope.object.position.copy(scope.position0);\r\n    scope.object.zoom = scope.zoom0;\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent(changeEvent);\r\n    scope.update();\r\n    state = STATE.NONE;\r\n  }; // this method is exposed, but perhaps it would be better if we can make it private...\r\n\r\n\r\n  this.update = function () {\r\n    var offset = new THREE.Vector3(); // so camera.up is the orbit axis\r\n\r\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n    var quatInverse = quat.clone().inverse();\r\n    var lastPosition = new THREE.Vector3();\r\n    var lastQuaternion = new THREE.Quaternion();\r\n    return function update() {\r\n      var position = scope.object.position;\r\n      offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\r\n\r\n      offset.applyQuaternion(quat); // angle from z-axis around y-axis\r\n\r\n      spherical.setFromVector3(offset);\r\n\r\n      if (scope.autoRotate && state === STATE.NONE) {\r\n        rotateLeft(getAutoRotationAngle());\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\r\n\r\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\r\n\r\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n      spherical.makeSafe();\r\n      spherical.radius *= scale; // restrict radius to be between desired limits\r\n\r\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\r\n\r\n      scope.target.add(panOffset);\r\n      offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\r\n\r\n      offset.applyQuaternion(quatInverse);\r\n      position.copy(scope.target).add(offset);\r\n      scope.object.lookAt(scope.target);\r\n\r\n      if (scope.enableDamping === true) {\r\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\r\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\r\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\r\n      } else {\r\n        sphericalDelta.set(0, 0, 0);\r\n        panOffset.set(0, 0, 0);\r\n      }\r\n\r\n      scale = 1; // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\r\n        scope.dispatchEvent(changeEvent);\r\n        lastPosition.copy(scope.object.position);\r\n        lastQuaternion.copy(scope.object.quaternion);\r\n        zoomChanged = false;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }();\r\n\r\n  this.dispose = function () {\r\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\r\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\r\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\r\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\r\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\r\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n    window.removeEventListener('keydown', onKeyDown, false); //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n  }; //\r\n  // internals\r\n  //\r\n\r\n\r\n  var scope = this;\r\n  var changeEvent = {\r\n    type: 'change'\r\n  };\r\n  var startEvent = {\r\n    type: 'start'\r\n  };\r\n  var endEvent = {\r\n    type: 'end'\r\n  };\r\n  var STATE = {\r\n    NONE: -1,\r\n    ROTATE: 0,\r\n    DOLLY: 1,\r\n    PAN: 2,\r\n    TOUCH_ROTATE: 3,\r\n    TOUCH_DOLLY_PAN: 4\r\n  };\r\n  var state = STATE.NONE;\r\n  var EPS = 0.000001; // current position in spherical coordinates\r\n\r\n  var spherical = new THREE.Spherical();\r\n  var sphericalDelta = new THREE.Spherical();\r\n  var scale = 1;\r\n  var panOffset = new THREE.Vector3();\r\n  var zoomChanged = false;\r\n  var rotateStart = new THREE.Vector2();\r\n  var rotateEnd = new THREE.Vector2();\r\n  var rotateDelta = new THREE.Vector2();\r\n  var panStart = new THREE.Vector2();\r\n  var panEnd = new THREE.Vector2();\r\n  var panDelta = new THREE.Vector2();\r\n  var dollyStart = new THREE.Vector2();\r\n  var dollyEnd = new THREE.Vector2();\r\n  var dollyDelta = new THREE.Vector2();\r\n\r\n  function getAutoRotationAngle() {\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n  }\r\n\r\n  function getZoomScale() {\r\n    return Math.pow(0.95, scope.zoomSpeed);\r\n  }\r\n\r\n  function rotateLeft(angle) {\r\n    sphericalDelta.theta -= angle;\r\n  }\r\n\r\n  function rotateUp(angle) {\r\n    sphericalDelta.phi -= angle;\r\n  }\r\n\r\n  var panLeft = function () {\r\n    var v = new THREE.Vector3();\r\n    return function panLeft(distance, objectMatrix) {\r\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n\r\n      v.multiplyScalar(-distance);\r\n      panOffset.add(v);\r\n    };\r\n  }();\r\n\r\n  var panUp = function () {\r\n    var v = new THREE.Vector3();\r\n    return function panUp(distance, objectMatrix) {\r\n      if (scope.screenSpacePanning === true) {\r\n        v.setFromMatrixColumn(objectMatrix, 1);\r\n      } else {\r\n        v.setFromMatrixColumn(objectMatrix, 0);\r\n        v.crossVectors(scope.object.up, v);\r\n      }\r\n\r\n      v.multiplyScalar(distance);\r\n      panOffset.add(v);\r\n    };\r\n  }(); // deltaX and deltaY are in pixels; right and down are positive\r\n\r\n\r\n  var pan = function () {\r\n    var offset = new THREE.Vector3();\r\n    return function pan(deltaX, deltaY) {\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (scope.object.isPerspectiveCamera) {\r\n        // perspective\r\n        var position = scope.object.position;\r\n        offset.copy(position).sub(scope.target);\r\n        var targetDistance = offset.length(); // half of the fov is center to top of screen\r\n\r\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\r\n\r\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n      } else if (scope.object.isOrthographicCamera) {\r\n        // orthographic\r\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n      } else {\r\n        // camera neither orthographic nor perspective\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\r\n        scope.enablePan = false;\r\n      }\r\n    };\r\n  }();\r\n\r\n  function dollyIn(dollyScale) {\r\n    if (scope.object.isPerspectiveCamera) {\r\n      scale /= dollyScale;\r\n    } else if (scope.object.isOrthographicCamera) {\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n    } else {\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n    }\r\n  }\r\n\r\n  function dollyOut(dollyScale) {\r\n    if (scope.object.isPerspectiveCamera) {\r\n      scale *= dollyScale;\r\n    } else if (scope.object.isOrthographicCamera) {\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n    } else {\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n    }\r\n  } //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n\r\n  function handleMouseDownRotate(event) {\r\n    //console.log( 'handleMouseDownRotate' );\r\n    rotateStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseDownDolly(event) {\r\n    //console.log( 'handleMouseDownDolly' );\r\n    dollyStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseDownPan(event) {\r\n    //console.log( 'handleMouseDownPan' );\r\n    panStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseMoveRotate(event) {\r\n    //console.log( 'handleMouseMoveRotate' );\r\n    rotateEnd.set(event.clientX, event.clientY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n    rotateStart.copy(rotateEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseMoveDolly(event) {\r\n    //console.log( 'handleMouseMoveDolly' );\r\n    dollyEnd.set(event.clientX, event.clientY);\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n      dollyIn(getZoomScale());\r\n    } else if (dollyDelta.y < 0) {\r\n      dollyOut(getZoomScale());\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseMovePan(event) {\r\n    //console.log( 'handleMouseMovePan' );\r\n    panEnd.set(event.clientX, event.clientY);\r\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n    pan(panDelta.x, panDelta.y);\r\n    panStart.copy(panEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseUp(event) {// console.log( 'handleMouseUp' );\r\n  }\r\n\r\n  function handleMouseWheel(event) {\r\n    // console.log( 'handleMouseWheel' );\r\n    if (event.deltaY < 0) {\r\n      dollyOut(getZoomScale());\r\n    } else if (event.deltaY > 0) {\r\n      dollyIn(getZoomScale());\r\n    }\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleKeyDown(event) {\r\n    // console.log( 'handleKeyDown' );\r\n    var needsUpdate = false;\r\n\r\n    switch (event.keyCode) {\r\n      case scope.keys.UP:\r\n        pan(0, scope.keyPanSpeed);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan(0, -scope.keyPanSpeed);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan(scope.keyPanSpeed, 0);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan(-scope.keyPanSpeed, 0);\r\n        needsUpdate = true;\r\n        break;\r\n    }\r\n\r\n    if (needsUpdate) {\r\n      // prevent the browser from scrolling on cursor keys\r\n      event.preventDefault();\r\n      scope.update();\r\n    }\r\n  }\r\n\r\n  function handleTouchStartRotate(event) {\r\n    //console.log( 'handleTouchStartRotate' );\r\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n\r\n  function handleTouchStartDollyPan(event) {\r\n    //console.log( 'handleTouchStartDollyPan' );\r\n    if (scope.enableZoom) {\r\n      var dx = event.touches[0].pageX; // - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY; // - event.touches[1].pageY;\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n      dollyStart.set(0, distance);\r\n    }\r\n\r\n    if (scope.enablePan) {\r\n      var x = 0.5 * (event.touches[0].pageX); // + event.touches[1].pageX);\r\n      var y = 0.5 * (event.touches[0].pageY); // + event.touches[1].pageY);\r\n      panStart.set(x, y);\r\n    }\r\n  }\r\n\r\n  function handleTouchMoveRotate(event) {\r\n    //console.log( 'handleTouchMoveRotate' );\r\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n    rotateStart.copy(rotateEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchMoveDollyPan(event) {\r\n    //console.log( 'handleTouchMoveDollyPan' );\r\n    if (scope.enableZoom) {\r\n      var dx = event.touches[0].pageX; // - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY; // - event.touches[1].pageY;\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n      dollyEnd.set(0, distance);\r\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\r\n      dollyIn(dollyDelta.y);\r\n      dollyStart.copy(dollyEnd);\r\n    }\r\n\r\n    if (scope.enablePan) {\r\n      var x = 0.5 * (event.touches[0].pageX); // + event.touches[1].pageX);\r\n      var y = 0.5 * (event.touches[0].pageY); // + event.touches[1].pageY);\r\n      panEnd.set(x, y);\r\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n      pan(panDelta.x, panDelta.y);\r\n      panStart.copy(panEnd);\r\n    }\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchEnd(event) {} //console.log( 'handleTouchEnd' );\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n\r\n  function onMouseDown(event) {\r\n    if (scope.enabled === false) return; // Prevent the browser from scrolling.\r\n\r\n    event.preventDefault(); // Manually set the focus since calling preventDefault above\r\n    // prevents the browser from setting it automatically.\r\n\r\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n    switch (event.button) {\r\n      case scope.mouseButtons.LEFT:\r\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n          if (scope.enablePan === false) return;\r\n          handleMouseDownPan(event);\r\n          state = STATE.PAN;\r\n        } else {\r\n          if (scope.enableRotate === false) return;\r\n          handleMouseDownRotate(event);\r\n          state = STATE.ROTATE;\r\n        }\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.MIDDLE:\r\n        if (scope.enableZoom === false) return;\r\n        handleMouseDownDolly(event);\r\n        state = STATE.DOLLY;\r\n        break;\r\n\r\n      case scope.mouseButtons.RIGHT:\r\n        if (scope.enablePan === false) return;\r\n        handleMouseDownPan(event);\r\n        state = STATE.PAN;\r\n        break;\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n      document.addEventListener('mousemove', onMouseMove, false);\r\n      document.addEventListener('mouseup', onMouseUp, false);\r\n      scope.dispatchEvent(startEvent);\r\n    }\r\n  }\r\n\r\n  function onMouseMove(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n\r\n    switch (state) {\r\n      case STATE.ROTATE:\r\n        if (scope.enableRotate === false) return;\r\n        handleMouseMoveRotate(event);\r\n        break;\r\n\r\n      case STATE.DOLLY:\r\n        if (scope.enableZoom === false) return;\r\n        handleMouseMoveDolly(event);\r\n        break;\r\n\r\n      case STATE.PAN:\r\n        if (scope.enablePan === false) return;\r\n        handleMouseMovePan(event);\r\n        break;\r\n    }\r\n  }\r\n\r\n  function onMouseUp(event) {\r\n    if (scope.enabled === false) return;\r\n    handleMouseUp(event);\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n    scope.dispatchEvent(endEvent);\r\n    state = STATE.NONE;\r\n  }\r\n\r\n  function onMouseWheel(event) {\r\n    if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    scope.dispatchEvent(startEvent);\r\n    handleMouseWheel(event);\r\n    scope.dispatchEvent(endEvent);\r\n  }\r\n\r\n  function onKeyDown(event) {\r\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\r\n    handleKeyDown(event);\r\n  }\r\n\r\n  function onTouchStart(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n\r\n    switch (event.touches.length) {\r\n      case 2:\r\n        // two-fingered touch: rotate\r\n        if (scope.enableRotate === false) return;\r\n        handleTouchStartRotate(event);\r\n        state = STATE.TOUCH_ROTATE;\r\n        break;\r\n\r\n      case 1:\r\n        // one-fingered touch: dolly-pan\r\n        if (scope.enableZoom === false && scope.enablePan === false) return;\r\n        handleTouchStartDollyPan(event);\r\n        state = STATE.TOUCH_DOLLY_PAN;\r\n        break;\r\n\r\n      default:\r\n        state = STATE.NONE;\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n      scope.dispatchEvent(startEvent);\r\n    }\r\n  }\r\n\r\n  function onTouchMove(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch (event.touches.length) {\r\n      case 2:\r\n        // two-fingered touch: rotate\r\n        if (scope.enableRotate === false) return;\r\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\r\n\r\n        handleTouchMoveRotate(event);\r\n        break;\r\n\r\n      case 1:\r\n        // one-fingered touch: dolly-pan\r\n        if (scope.enableZoom === false && scope.enablePan === false) return;\r\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\r\n\r\n        handleTouchMoveDollyPan(event);\r\n        break;\r\n\r\n      default:\r\n        state = STATE.NONE;\r\n    }\r\n  }\r\n\r\n  function onTouchEnd(event) {\r\n    if (scope.enabled === false) return;\r\n    handleTouchEnd(event);\r\n    scope.dispatchEvent(endEvent);\r\n    state = STATE.NONE;\r\n  }\r\n\r\n  function onContextMenu(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n  } //\r\n\r\n\r\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\r\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\r\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\r\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\r\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\r\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\r\n  window.addEventListener('keydown', onKeyDown, false); // force an update at start\r\n\r\n  this.update();\r\n};\r\n\r\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\r\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\r\nObject.defineProperties(THREE.OrbitControls.prototype, {\r\n  center: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .center has been renamed to .target');\r\n      return this.target;\r\n    }\r\n  },\r\n  // backward compatibility\r\n  noZoom: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      return !this.enableZoom;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      this.enableZoom = !value;\r\n    }\r\n  },\r\n  noRotate: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      return !this.enableRotate;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      this.enableRotate = !value;\r\n    }\r\n  },\r\n  noPan: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      return !this.enablePan;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      this.enablePan = !value;\r\n    }\r\n  },\r\n  noKeys: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      return !this.enableKeys;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      this.enableKeys = !value;\r\n    }\r\n  },\r\n  staticMoving: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      return !this.enableDamping;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      this.enableDamping = !value;\r\n    }\r\n  },\r\n  dynamicDampingFactor: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      return this.dampingFactor;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      this.dampingFactor = value;\r\n    }\r\n  }\r\n});\r\n/* three-orbitcontrols addendum */\r\n\r\nmodule.exports = exports.default = THREE.OrbitControls;","// import React from 'react';\r\nimport * as THREE from 'three';\r\nconst FBXLoader = require('three-fbxloader-offical');\r\n\r\nconst fbxModelsLoader = (modelsUrlArray) => {\r\n  const loader = new FBXLoader();\r\n  let mixer = null;\r\n  let modelLoadingArray = [];\r\n  modelsUrlArray.forEach((modelUrl, idx) => {\r\n    modelLoadingArray.push(\r\n      new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          loader.load(modelUrl, (object) => {\r\n            mixer = new THREE.AnimationMixer( object );\r\n            const action = mixer.clipAction( object.animations[ 0 ] );\r\n            action.loop = THREE.LoopOnce;\r\n            action.clampWhenFinished = true;\r\n            // action.play();\r\n            object.traverse(child => {\r\n              if (child.isMesh) {\r\n                child.castShadow = true;\r\n                child.receiveShadow = true;\r\n              }\r\n            });\r\n            resolve({\r\n              object: object,\r\n              mixer: mixer,\r\n              action: action,\r\n            });\r\n\r\n          }, (item) => {\r\n            // console.log( item, loaded, total );\r\n            console.log(item.loaded / item.total * 100 + '%');\r\n          }, (err) => {\r\n            console.log(err);\r\n            reject(err);\r\n          });\r\n        }, idx * 1000)\r\n        // resolve(\"foo\");\r\n      })\r\n    )\r\n  })\r\n  // const values = Promise.all(modelLoadingArray).then(values => { \r\n  //   return values;\r\n  // })\r\n  // return values;\r\n  return Promise.all(modelLoadingArray);\r\n  // return [];\r\n}\r\n\r\nexport default fbxModelsLoader;","import React from 'react';\r\nimport {useEffect, useState, useCallback} from 'react';\r\n\r\nimport fbxModelsLoader from 'components/fbxModelsLoader';\r\n\r\nconst CreateGame = (props) => {\r\n  /**\r\n   * createGame\r\n   *   - load kitchen and 3 hobs models\r\n   *   - connect to server and get the N-players uuid\r\n   *   - generate and display the qrcode base on the players uuid\r\n   *   - hidden buttons? (immediate start / restart / end game)\r\n   *   - wait the player scan the qrcode\r\n   *     - player joined (1 - N), start count down\r\n   * \r\n   * startGame\r\n   *   - user shake and the correspond hob play the animation\r\n   *     - if no one finish the shake, the total game time is 20secs\r\n   *     - if a user finish the shake, other players count down 5secs\r\n   *   - for 20% progress, add a popup\r\n   * \r\n   * endGame\r\n   *   - show the result\r\n   *   - auto restart after ? secs (or staff click?)\r\n   * \r\n   * */\r\n  const [loadedModels, setLoadedModels] = useState([]);\r\n  const fbxModels = [\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n  ];\r\n  useEffect(() => {\r\n    // page load\r\n    loadModels();\r\n    return () => {\r\n      // page unload\r\n\r\n    }\r\n  }, []);\r\n  const loadModels = () => {\r\n    // load the models of the kitchen and the hobs\r\n    fbxModelsLoader(fbxModels).then(models => {\r\n      console.log(models);\r\n      setLoadedModels(models);\r\n    });\r\n  }\r\n  return <div className=\"page createGame\">\r\n    content of createGame\r\n    models loaded: {loadedModels.length}\r\n  </div>;\r\n}\r\nexport default CreateGame;","const routes = {\r\n  homePage: '/game',\r\n  joinGame: '/game/:userId',\r\n  fbxViewer: '/model',\r\n  fbxViewerOfName: '/:fbxName',\r\n  kitchenViewer: '/kitchenViewer',\r\n  touchTable: '/touchTable',\r\n  touchTableViewer: '/touchTableViewer',\r\n  indexPage: '/index',\r\n  animatingLines: '/animatingLines',\r\n  svgAnimator: '/svgAnimator',\r\n\r\n};\r\n\r\nexport default routes;","module.exports = __webpack_public_path__ + \"static/media/190715_CLP_game(8).3f43f4c2.fbx\";","module.exports = __webpack_public_path__ + \"static/media/meat.5069922d.png\";","module.exports = __webpack_public_path__ + \"static/media/mid_meat.6081577e.png\";","module.exports = __webpack_public_path__ + \"static/media/welldone_meat.0da2595b.png\";","module.exports = __webpack_public_path__ + \"static/media/click.826671b9.mp3\";","var map = {\n\t\"./animatingLines\": [\n\t\t30,\n\t\t9\n\t],\n\t\"./animatingLines.js\": [\n\t\t30,\n\t\t9\n\t],\n\t\"./createGame\": [\n\t\t47,\n\t\t9\n\t],\n\t\"./createGame.js\": [\n\t\t47,\n\t\t9\n\t],\n\t\"./custom-inputbox.css\": [\n\t\t76,\n\t\t7\n\t],\n\t\"./fbxViewer\": [\n\t\t20,\n\t\t9\n\t],\n\t\"./fbxViewer.css\": [\n\t\t70,\n\t\t7\n\t],\n\t\"./fbxViewer.js\": [\n\t\t20,\n\t\t9\n\t],\n\t\"./homePage\": [\n\t\t33,\n\t\t9\n\t],\n\t\"./homePage.css\": [\n\t\t73,\n\t\t7\n\t],\n\t\"./homePage.js\": [\n\t\t33,\n\t\t9\n\t],\n\t\"./indexPage\": [\n\t\t28,\n\t\t9\n\t],\n\t\"./indexPage.js\": [\n\t\t28,\n\t\t9\n\t],\n\t\"./joinGame\": [\n\t\t34,\n\t\t9\n\t],\n\t\"./joinGame.js\": [\n\t\t34,\n\t\t9\n\t],\n\t\"./kitchenViewer\": [\n\t\t21,\n\t\t9\n\t],\n\t\"./kitchenViewer.css\": [\n\t\t72,\n\t\t7\n\t],\n\t\"./kitchenViewer.js\": [\n\t\t21,\n\t\t9\n\t],\n\t\"./svgAnimator\": [\n\t\t31,\n\t\t9\n\t],\n\t\"./svgAnimator.css\": [\n\t\t75,\n\t\t7\n\t],\n\t\"./svgAnimator.js\": [\n\t\t31,\n\t\t9\n\t],\n\t\"./touchTable\": [\n\t\t32,\n\t\t9\n\t],\n\t\"./touchTable.css\": [\n\t\t74,\n\t\t7\n\t],\n\t\"./touchTable.js\": [\n\t\t32,\n\t\t9\n\t],\n\t\"./touchTableViewer\": [\n\t\t29,\n\t\t9\n\t],\n\t\"./touchTableViewer.js\": [\n\t\t29,\n\t\t9\n\t]\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar ids = map[req], id = ids[0];\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 95;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}