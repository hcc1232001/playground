{"version":3,"sources":["pages/fbxViewer.js","components/fbxModelsLoader.js","pages/createGame.js","containers/shakeGame.js","pages/homePage.js","media/models/190717_frying pan animationA_shake.fbx","utils/vendor/orbitControls.js","media/models/Windows for Building department breaking.fbx","globals/config.js"],"names":["FBXLoader","require","App","props","_useState","useState","scene","camera","containerEl","renderer","orbitControl","raycaster","clock","mixer","_useState2","Object","D_Documents_Projects_React_playground_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","threeObjects","setThreeObjects","_useState3","_useState4","cameraPosition","setCameraPosition","animationFrame","cameraDefaultPosition","useEffect","THREE","offsetWidth","offsetHeight","position","set","lookAt","updateProjectionMatrix","light","add","antialias","setPixelRatio","window","devicePixelRatio","setSize","setClearColor","appendChild","domElement","OrbitControls","maxDistance","loader","load","fbxUrl","object","action","clipAction","animations","play","addShadowToChild","traverse","child","isMesh","scale","x","y","z","castShadow","receiveShadow","prevThreeObjects","D_Documents_Projects_React_playground_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","item","console","log","loaded","total","err","initScene","clearTimeout","setTimeout","update","newCamPos","oldCamPos","render","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","ref","onClick","prevCameraPosition","length","className","style","height","fbxModelsLoader","modelsUrlArray","modelLoadingArray","forEach","modelUrl","idx","push","Promise","resolve","reject","loop","clampWhenFinished","all","CreateGame","slicedToArray","loadedModels","setLoadedModels","fbxModels","loadModels","then","models","react_default","ShakeGame","playerInfo","shakeCount","fbxViewer","socket","setSocket","playersInfo","setPlayersInfo","serverUrl","concat","serverPath","serverPort","io","on","emit","_loop","i","playerIdx","joinGamePath","location","origin","generatePath","routes","joinGame","userId","QRCode","toDataURL","width","color","dark","margin","url","prevPlayersInfo","newPlayerInfo","toConsumableArray","objectSpread","img","msg","map","joined","key","href","target","rel","src","alt","shakeGame","module","exports","__webpack_require__","p","this","undefined","document","enabled","Vector3","minDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","panOffset","setFromSpherical","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","event","clientX","clientY","preventDefault","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","prototype","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","default","d","__webpack_exports__"],"mappings":"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","file":"static/js/4.9be6dc2b.chunk.js","sourcesContent":["import React from 'react';\r\nimport {useState, useEffect} from 'react';\r\nimport * as THREE from 'three';\r\nimport OrbitControls from 'utils/vendor/orbitControls';\r\n// import {FBXLoader} from 'utils/vendor/FBXLoader';\r\n\r\nimport fbxUrl from 'media/models/Windows for Building department breaking.fbx';\r\n// import fbxUrl from 'media/models/190717_frying pan animationA(2).fbx';\r\n\r\n// import fbxUrl from 'media/models/190715_CLP_game(7).fbx';\r\n\r\nconst FBXLoader = require('three-fbxloader-offical');\r\n\r\nconst addShadowToChild = (object, scene) => {\r\n  let camera = null;\r\n  object.traverse( function ( child ) {\r\n    if (object !== child) {\r\n      addShadowToChild(child, scene);\r\n    }\r\n    if (child.isMesh && child.scale.x === 0 && child.scale.y === 0 && child.scale.z === 0) {\r\n      child.scale.x = 0.001;\r\n      child.scale.y = 0.001;\r\n      child.scale.z = 0.001;\r\n    }\r\n    child.castShadow = true;\r\n    child.receiveShadow = true;\r\n  });\r\n  return camera;\r\n}\r\nconst App = (props) => {\r\n  const [threeObjects, setThreeObjects] = useState({\r\n    scene: null,\r\n    camera: null,\r\n    containerEl: null,\r\n    renderer: null,\r\n    orbitControl: null,\r\n    raycaster: null,\r\n    clock: null,\r\n    mixer: null,\r\n  });\r\n  const [cameraPosition, setCameraPosition] = useState(0);\r\n  let containerEl = null;\r\n  let animationFrame = null;\r\n  const cameraDefaultPosition = [\r\n    [500, 500, 250],\r\n    [500, 500, -250],\r\n    [500, -500, -250],\r\n    [500, -500, 250],\r\n  ]\r\n  const setContainerEl = (ref) => containerEl = ref;\r\n  const initScene = () => {\r\n    const scene = new THREE.Scene();\r\n    const camera = new THREE.PerspectiveCamera( 50, containerEl.offsetWidth / containerEl.offsetHeight, 1, 1000 );\r\n    camera.position.set(500, 500, 250);\r\n    camera.lookAt(0, 0, 0);\r\n    camera.updateProjectionMatrix();\r\n    \r\n    const light = new THREE.DirectionalLight(0xFFFFFF, 1);\r\n    light.position.set(50, 100, 100);\r\n    scene.add(light);\r\n\r\n    const renderer = new THREE.WebGLRenderer( { antialias: true } );\r\n    renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize( containerEl.offsetWidth, containerEl.offsetHeight );\r\n    renderer.setClearColor( 0xcccccc, 1 );\r\n    containerEl.appendChild( renderer.domElement );\r\n\r\n    // add control\r\n    const orbitControl = new OrbitControls( camera, renderer.domElement );\r\n    // dampling\r\n    // orbitControl.enableDamping = true;\r\n    // orbitControl.dampingFactor = 0.05;\r\n    // // to cancel out the super fast rotation after enabled damping\r\n    // // orbitControl.enableRotate = false;\r\n    // orbitControl.rotateSpeed = 0.02;\r\n    // orbitControl.autoRotateSpeed = 0.05;\r\n    \r\n    /**\r\n     * limit the vertical rotation\r\n     * https://stackoverflow.com/questions/25308943/limit-orbitcontrols-horizontal-rotation/25311658#25311658\r\n     **/ \r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians\r\n    // orbitControl.minPolarAngle = Math.PI / 8;\r\n    // orbitControl.maxPolarAngle = Math.PI * 3 / 8;\r\n    // // How far you can orbit horizontally, upper and lower limits.\r\n    // // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    // orbitControl.minAzimuthAngle = Math.PI / 4;\r\n    // orbitControl.maxAzimuthAngle = Math.PI / 4; \r\n    \r\n    // // to disable zoom\r\n    // orbitControl.enableZoom = false;\r\n    // orbitControl.minDistance = 5;\r\n    // orbitControl.maxDistance = 5;\r\n    // to disable rotation\r\n    // orbitControl.enableRotate = false;\r\n    // to disable pan\r\n    // orbitControl.enablePan = false;\r\n    // orbitControl.panSpeed = 0.05;\r\n    // raycaster\r\n    const raycaster = new THREE.Raycaster(camera.position, new THREE.Vector3(0, 0, 0), 0, orbitControl.maxDistance * 2);\r\n\r\n    const clock = new THREE.Clock();\r\n\r\n    const loader = new FBXLoader();\r\n    let mixer = null;\r\n    loader.load(fbxUrl, (object) => {\r\n      mixer = new THREE.AnimationMixer( object );\r\n      const action = mixer.clipAction( object.animations[ 0 ] );\r\n      // action.loop = THREE.LoopOnce;\r\n      // action.clampWhenFinished = true;\r\n      action.play();\r\n      // object.traverse( function ( child ) {\r\n      //   if ( child.isMesh ) {\r\n      //     child.castShadow = true;\r\n      //     child.receiveShadow = true;\r\n      //   }\r\n      // });\r\n      addShadowToChild(object, scene);\r\n\r\n      scene.add(object);\r\n      camera.lookAt(object);\r\n      setThreeObjects((prevThreeObjects) => {\r\n        return {\r\n          ...prevThreeObjects,\r\n          mixer: mixer,\r\n          action: action,\r\n        }\r\n      })\r\n    }, (item) => {\r\n      // console.log( item, loaded, total );\r\n      console.log(item.loaded / item.total * 100 + '%');\r\n    }, (err) => {\r\n      console.log(err);\r\n    });\r\n    \r\n    setThreeObjects({\r\n      scene: scene,\r\n      camera: camera,\r\n      containerEl: containerEl,\r\n      renderer: renderer,\r\n      orbitControl: orbitControl,\r\n      raycaster: raycaster,\r\n      clock: clock,\r\n    })\r\n  }\r\n  const update = () => {\r\n    animationFrame = setTimeout(() => update(), 1000 / 30);\r\n    // fix the animation step to 30fps\r\n    const delta = 1 / 30; //threeObjects.clock.getDelta();\r\n    if (threeObjects.mixer) {\r\n      threeObjects.mixer.update(delta);\r\n    }\r\n    // try move camera to new position\r\n    const newCamPos = cameraDefaultPosition[cameraPosition];\r\n    const oldCamPos = threeObjects.camera.position;\r\n    if (newCamPos[0] !== oldCamPos.x ||\r\n      newCamPos[1] !== oldCamPos.y||\r\n      newCamPos[2] !== oldCamPos.z) {\r\n      oldCamPos.x = (newCamPos[0] - oldCamPos.x) * 0.15 + oldCamPos.x;\r\n      oldCamPos.y = (newCamPos[1] - oldCamPos.y) * 0.15 + oldCamPos.y;\r\n      oldCamPos.z = (newCamPos[2] - oldCamPos.z) * 0.15 + oldCamPos.z;\r\n    }\r\n    threeObjects.orbitControl.update();\r\n    threeObjects.renderer.render( threeObjects.scene, threeObjects.camera );\r\n  };\r\n  const doCameraAnimation = () => {\r\n    setCameraPosition((prevCameraPosition) => {\r\n      return (prevCameraPosition + 1) % cameraDefaultPosition.length;\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    initScene();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (animationFrame)\r\n      // cancelAnimationFrame(animationFrame);\r\n      clearTimeout(animationFrame);\r\n    // console.log(threeObjects);\r\n    if (threeObjects.scene) {\r\n      animationFrame = setTimeout(() => update(), 1000 / 30);//update();\r\n    }\r\n    return () => {\r\n      if (animationFrame)\r\n        // cancelAnimationFrame(animationFrame);\r\n        clearTimeout(animationFrame);\r\n    }\r\n  }, [threeObjects, cameraPosition]);\r\n  return <div ref={setContainerEl}\r\n    onClick={doCameraAnimation}\r\n    className=\"threeCanvas\"\r\n    style={{\r\n      height: '100vh',\r\n    }}>\r\n  </div>;\r\n}\r\n\r\nexport default App;","// import React from 'react';\r\nimport * as THREE from 'three';\r\nconst FBXLoader = require('three-fbxloader-offical');\r\n\r\nconst fbxModelsLoader = (modelsUrlArray) => {\r\n  const loader = new FBXLoader();\r\n  let mixer = null;\r\n  let modelLoadingArray = [];\r\n  modelsUrlArray.forEach((modelUrl, idx) => {\r\n    modelLoadingArray.push(\r\n      new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          loader.load(modelUrl, (object) => {\r\n            mixer = new THREE.AnimationMixer( object );\r\n            const action = mixer.clipAction( object.animations[ 0 ] );\r\n            action.loop = THREE.LoopOnce;\r\n            action.clampWhenFinished = true;\r\n            // action.play();\r\n            object.traverse(child => {\r\n              if (child.isMesh) {\r\n                child.castShadow = true;\r\n                child.receiveShadow = true;\r\n              }\r\n            });\r\n            resolve({\r\n              object: object,\r\n              mixer: mixer,\r\n              action: action,\r\n            });\r\n\r\n          }, (item) => {\r\n            // console.log( item, loaded, total );\r\n            console.log(item.loaded / item.total * 100 + '%');\r\n          }, (err) => {\r\n            console.log(err);\r\n            reject(err);\r\n          });\r\n        }, idx * 1000)\r\n        // resolve(\"foo\");\r\n      })\r\n    )\r\n  })\r\n  // const values = Promise.all(modelLoadingArray).then(values => { \r\n  //   return values;\r\n  // })\r\n  // return values;\r\n  return Promise.all(modelLoadingArray);\r\n  // return [];\r\n}\r\n\r\nexport default fbxModelsLoader;","import React from 'react';\r\nimport {useEffect, useState, useCallback} from 'react';\r\n\r\nimport fbxModelsLoader from 'components/fbxModelsLoader';\r\n\r\nconst CreateGame = (props) => {\r\n  /**\r\n   * createGame\r\n   *   - load kitchen and 3 hobs models\r\n   *   - connect to server and get the N-players uuid\r\n   *   - generate and display the qrcode base on the players uuid\r\n   *   - hidden buttons? (immediate start / restart / end game)\r\n   *   - wait the player scan the qrcode\r\n   *     - player joined (1 - N), start count down\r\n   * \r\n   * startGame\r\n   *   - user shake and the correspond hob play the animation\r\n   *     - if no one finish the shake, the total game time is 20secs\r\n   *     - if a user finish the shake, other players count down 5secs\r\n   *   - for 20% progress, add a popup\r\n   * \r\n   * endGame\r\n   *   - show the result\r\n   *   - auto restart after ? secs (or staff click?)\r\n   * \r\n   * */\r\n  const [loadedModels, setLoadedModels] = useState([]);\r\n  const fbxModels = [\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n    require('media/models/190717_frying pan animationA_shake.fbx'),\r\n  ];\r\n  useEffect(() => {\r\n    // page load\r\n    loadModels();\r\n    return () => {\r\n      // page unload\r\n\r\n    }\r\n  }, []);\r\n  const loadModels = () => {\r\n    // load the models of the kitchen and the hobs\r\n    fbxModelsLoader(fbxModels).then(models => {\r\n      console.log(models);\r\n      setLoadedModels(models);\r\n    });\r\n  }\r\n  return <div className=\"page createGame\">\r\n    content of createGame\r\n    models loaded: {loadedModels.length}\r\n  </div>;\r\n}\r\nexport default CreateGame;","import React from 'react';\r\nimport FBXViewer from 'pages/fbxViewer';\r\n// import {useState, useEffect} from 'react';\r\n// import io from 'socket.io-client';\r\n\r\n// import {serverPath, serverPort} from 'globals/config';\r\n\r\nconst ShakeGame = (props) => {\r\n  // const [socket, setSocket] = useState(null);\r\n  // useEffect(() => {\r\n  //   // const serverPath = 'http://localhost';\r\n  //   // get the ip and port from ipc\r\n  //   // const socket = io(window.location.origin);\r\n  //   const serverUrl = `${serverPath}:${serverPort}`;\r\n  //   const socket = io(serverUrl);\r\n  //   setSocket(socket);\r\n  //   return () => {\r\n\r\n  //   }\r\n  // }, []);\r\n  \r\n  // useEffect(()=>{\r\n  //   // bindDeviceMotion({\r\n  //   //   onShake: () => setShakeCounter((prevShakeCounter => {\r\n  //   //       return prevShakeCounter + 1;\r\n  //   //     }))\r\n  //   // })\r\n  //   // change to playing scene/ waiting scene base on user status\r\n  //   socket.on('gameStarted', (msg) => {\r\n  //   })\r\n  // })\r\n  // const init = () => {\r\n  //   useDeviceMotion({\r\n  //     onShake: () => setShakeCounter((prevShakeCounter => {\r\n  //         return prevShakeCounter + 1;\r\n  //       }))\r\n  //   })\r\n  // }\r\n\r\n  return <div>\r\n    Shaked {props.playerInfo.shakeCount} times.\r\n    <FBXViewer shakeCount={props.playerInfo.shakeCount} />\r\n  </div>;\r\n}\r\n\r\nexport default ShakeGame;","import React from 'react';\r\nimport {generatePath} from 'react-router-dom';\r\nimport {useState, useEffect} from 'react';\r\nimport io from 'socket.io-client';\r\nimport QRCode from 'qrcode';\r\n\r\nimport routes from 'globals/routes';\r\n\r\nimport {serverPath, serverPort} from 'globals/config';\r\n\r\nimport ShakeGame from 'containers/shakeGame';\r\nimport CreateGame from 'pages/createGame';\r\n\r\nimport './homePage.css';\r\n\r\n// const serverPath = 'https://socketio-testing.herokuapp.com';\r\n// const serverPort = 443;\r\n\r\nconst App = (props) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [playersInfo, setPlayersInfo] = useState([]);\r\n\r\n  const panFbxPath = [\r\n    'media/models/190717_frying pan animationA_shake.fbx',\r\n    'media/models/190717_frying pan animationA_shake.fbx',\r\n    'media/models/190717_frying pan animationA_shake.fbx',\r\n  ]\r\n  useEffect(() => {\r\n    // const serverPath = 'http://localhost';\r\n    // get the ip and port from ipc\r\n    // const socket = io(window.location.origin);\r\n    const serverUrl = `${serverPath}:${serverPort}`;\r\n    const socket = io(serverUrl);\r\n    setSocket(socket);\r\n    return () => {\r\n\r\n    }\r\n  }, []);\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('connect', () => {\r\n        console.log('connected !');\r\n        socket.emit('createRoom');\r\n      });\r\n      socket.on('playersInfo', (playersInfo) => {\r\n        for (let i = 0; i < playersInfo.length; i++) {\r\n          const playerIdx = i;\r\n          const playerInfo = playersInfo[playerIdx];\r\n          // const joinGamePath = window.location.origin + '/#' + routes.joinGame.replace(':userId', playerInfo['playerId']);\r\n          const joinGamePath = window.location.origin + '/#' + generatePath(routes.joinGame, {userId: playerInfo['playerId']});\r\n          QRCode.toDataURL(\r\n            joinGamePath,\r\n            {\r\n              width: 300,\r\n              color: {\r\n                dark: '#000000FF',\r\n                light: '#FFFFFFFF'\r\n              },\r\n              margin: 0,\r\n            }\r\n          )\r\n          .then(url => {\r\n            setPlayersInfo((prevPlayersInfo) => {\r\n              const newPlayerInfo = [...prevPlayersInfo];\r\n              newPlayerInfo[playerIdx] = {\r\n                ...playerInfo,\r\n                url: joinGamePath,\r\n                img: url\r\n              };\r\n              return newPlayerInfo;\r\n            })\r\n            // this.qrcodeImage[idx][platform].setAttribute('src', url);\r\n          })\r\n        }\r\n      })\r\n      socket.on('*', (msg) => {\r\n        console.log(msg);\r\n      })\r\n    }\r\n  }, [socket]);\r\n\r\n  return <div className=\"page homePage\">\r\n    {/* display the box of the player recieved from server */}\r\n    {playersInfo.map(playerInfo => {\r\n      if (playerInfo.joined) {\r\n        return <div key={playerInfo['url']} className=\"player-block\">\r\n          {/* https://mathiasbynens.github.io/rel-noopener/ */}\r\n          <a href={playerInfo['url']} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <img src={playerInfo['img']} alt={`player QRcode`}/>\r\n          </a>\r\n        </div>;\r\n      } else {\r\n        return <div key={playerInfo['url']} className=\"player-block\">\r\n          Player joined!\r\n          <ShakeGame playerInfo={playerInfo} />\r\n        </div>;\r\n      }\r\n    })}\r\n    {/* <CreateGame models={panFbxPath} /> */}\r\n  </div>;\r\n}\r\n\r\nexport default App;","module.exports = __webpack_public_path__ + \"static/media/190717_frying pan animationA_shake.0f9bee90.fbx\";","/* three-orbitcontrols addendum */\r\nvar THREE = require('three');\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\n\r\nTHREE.OrbitControls = function (object, domElement) {\r\n  this.object = object;\r\n  this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\r\n\r\n  this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\r\n\r\n  this.target = new THREE.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\r\n\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\r\n\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n\r\n  this.minPolarAngle = 0; // radians\r\n\r\n  this.maxPolarAngle = Math.PI; // radians\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\r\n  this.minAzimuthAngle = -Infinity; // radians\r\n\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0; // Set to false to disable rotating\r\n\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0; // Set to false to disable panning\r\n\r\n  this.enablePan = true;\r\n  this.panSpeed = 1.0;\r\n  this.screenSpacePanning = false; // if true, pan in screen-space\r\n\r\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n  // Set to false to disable use of the keys\r\n\r\n  this.enableKeys = true; // The four arrow keys\r\n\r\n  this.keys = {\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    BOTTOM: 40\r\n  }; // Mouse buttons\r\n\r\n  this.mouseButtons = {\r\n    LEFT: THREE.MOUSE.LEFT,\r\n    MIDDLE: THREE.MOUSE.MIDDLE,\r\n    RIGHT: THREE.MOUSE.RIGHT\r\n  }; // for reset\r\n\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom; //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n    return spherical.phi;\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n    return spherical.theta;\r\n  };\r\n\r\n  this.saveState = function () {\r\n    scope.target0.copy(scope.target);\r\n    scope.position0.copy(scope.object.position);\r\n    scope.zoom0 = scope.object.zoom;\r\n  };\r\n\r\n  this.reset = function () {\r\n    scope.target.copy(scope.target0);\r\n    scope.object.position.copy(scope.position0);\r\n    scope.object.zoom = scope.zoom0;\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent(changeEvent);\r\n    scope.update();\r\n    state = STATE.NONE;\r\n  }; // this method is exposed, but perhaps it would be better if we can make it private...\r\n\r\n\r\n  this.update = function () {\r\n    var offset = new THREE.Vector3(); // so camera.up is the orbit axis\r\n\r\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n    var quatInverse = quat.clone().inverse();\r\n    var lastPosition = new THREE.Vector3();\r\n    var lastQuaternion = new THREE.Quaternion();\r\n    return function update() {\r\n      var position = scope.object.position;\r\n      offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\r\n\r\n      offset.applyQuaternion(quat); // angle from z-axis around y-axis\r\n\r\n      spherical.setFromVector3(offset);\r\n\r\n      if (scope.autoRotate && state === STATE.NONE) {\r\n        rotateLeft(getAutoRotationAngle());\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\r\n\r\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\r\n\r\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n      spherical.makeSafe();\r\n      spherical.radius *= scale; // restrict radius to be between desired limits\r\n\r\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\r\n\r\n      scope.target.add(panOffset);\r\n      offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\r\n\r\n      offset.applyQuaternion(quatInverse);\r\n      position.copy(scope.target).add(offset);\r\n      scope.object.lookAt(scope.target);\r\n\r\n      if (scope.enableDamping === true) {\r\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\r\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\r\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\r\n      } else {\r\n        sphericalDelta.set(0, 0, 0);\r\n        panOffset.set(0, 0, 0);\r\n      }\r\n\r\n      scale = 1; // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\r\n        scope.dispatchEvent(changeEvent);\r\n        lastPosition.copy(scope.object.position);\r\n        lastQuaternion.copy(scope.object.quaternion);\r\n        zoomChanged = false;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }();\r\n\r\n  this.dispose = function () {\r\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\r\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\r\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\r\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\r\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\r\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n    window.removeEventListener('keydown', onKeyDown, false); //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n  }; //\r\n  // internals\r\n  //\r\n\r\n\r\n  var scope = this;\r\n  var changeEvent = {\r\n    type: 'change'\r\n  };\r\n  var startEvent = {\r\n    type: 'start'\r\n  };\r\n  var endEvent = {\r\n    type: 'end'\r\n  };\r\n  var STATE = {\r\n    NONE: -1,\r\n    ROTATE: 0,\r\n    DOLLY: 1,\r\n    PAN: 2,\r\n    TOUCH_ROTATE: 3,\r\n    TOUCH_DOLLY_PAN: 4\r\n  };\r\n  var state = STATE.NONE;\r\n  var EPS = 0.000001; // current position in spherical coordinates\r\n\r\n  var spherical = new THREE.Spherical();\r\n  var sphericalDelta = new THREE.Spherical();\r\n  var scale = 1;\r\n  var panOffset = new THREE.Vector3();\r\n  var zoomChanged = false;\r\n  var rotateStart = new THREE.Vector2();\r\n  var rotateEnd = new THREE.Vector2();\r\n  var rotateDelta = new THREE.Vector2();\r\n  var panStart = new THREE.Vector2();\r\n  var panEnd = new THREE.Vector2();\r\n  var panDelta = new THREE.Vector2();\r\n  var dollyStart = new THREE.Vector2();\r\n  var dollyEnd = new THREE.Vector2();\r\n  var dollyDelta = new THREE.Vector2();\r\n\r\n  function getAutoRotationAngle() {\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n  }\r\n\r\n  function getZoomScale() {\r\n    return Math.pow(0.95, scope.zoomSpeed);\r\n  }\r\n\r\n  function rotateLeft(angle) {\r\n    sphericalDelta.theta -= angle;\r\n  }\r\n\r\n  function rotateUp(angle) {\r\n    sphericalDelta.phi -= angle;\r\n  }\r\n\r\n  var panLeft = function () {\r\n    var v = new THREE.Vector3();\r\n    return function panLeft(distance, objectMatrix) {\r\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n\r\n      v.multiplyScalar(-distance);\r\n      panOffset.add(v);\r\n    };\r\n  }();\r\n\r\n  var panUp = function () {\r\n    var v = new THREE.Vector3();\r\n    return function panUp(distance, objectMatrix) {\r\n      if (scope.screenSpacePanning === true) {\r\n        v.setFromMatrixColumn(objectMatrix, 1);\r\n      } else {\r\n        v.setFromMatrixColumn(objectMatrix, 0);\r\n        v.crossVectors(scope.object.up, v);\r\n      }\r\n\r\n      v.multiplyScalar(distance);\r\n      panOffset.add(v);\r\n    };\r\n  }(); // deltaX and deltaY are in pixels; right and down are positive\r\n\r\n\r\n  var pan = function () {\r\n    var offset = new THREE.Vector3();\r\n    return function pan(deltaX, deltaY) {\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (scope.object.isPerspectiveCamera) {\r\n        // perspective\r\n        var position = scope.object.position;\r\n        offset.copy(position).sub(scope.target);\r\n        var targetDistance = offset.length(); // half of the fov is center to top of screen\r\n\r\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\r\n\r\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n      } else if (scope.object.isOrthographicCamera) {\r\n        // orthographic\r\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n      } else {\r\n        // camera neither orthographic nor perspective\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\r\n        scope.enablePan = false;\r\n      }\r\n    };\r\n  }();\r\n\r\n  function dollyIn(dollyScale) {\r\n    if (scope.object.isPerspectiveCamera) {\r\n      scale /= dollyScale;\r\n    } else if (scope.object.isOrthographicCamera) {\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n    } else {\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n    }\r\n  }\r\n\r\n  function dollyOut(dollyScale) {\r\n    if (scope.object.isPerspectiveCamera) {\r\n      scale *= dollyScale;\r\n    } else if (scope.object.isOrthographicCamera) {\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n    } else {\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n    }\r\n  } //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n\r\n  function handleMouseDownRotate(event) {\r\n    //console.log( 'handleMouseDownRotate' );\r\n    rotateStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseDownDolly(event) {\r\n    //console.log( 'handleMouseDownDolly' );\r\n    dollyStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseDownPan(event) {\r\n    //console.log( 'handleMouseDownPan' );\r\n    panStart.set(event.clientX, event.clientY);\r\n  }\r\n\r\n  function handleMouseMoveRotate(event) {\r\n    //console.log( 'handleMouseMoveRotate' );\r\n    rotateEnd.set(event.clientX, event.clientY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n    rotateStart.copy(rotateEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseMoveDolly(event) {\r\n    //console.log( 'handleMouseMoveDolly' );\r\n    dollyEnd.set(event.clientX, event.clientY);\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n      dollyIn(getZoomScale());\r\n    } else if (dollyDelta.y < 0) {\r\n      dollyOut(getZoomScale());\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseMovePan(event) {\r\n    //console.log( 'handleMouseMovePan' );\r\n    panEnd.set(event.clientX, event.clientY);\r\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n    pan(panDelta.x, panDelta.y);\r\n    panStart.copy(panEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleMouseUp(event) {// console.log( 'handleMouseUp' );\r\n  }\r\n\r\n  function handleMouseWheel(event) {\r\n    // console.log( 'handleMouseWheel' );\r\n    if (event.deltaY < 0) {\r\n      dollyOut(getZoomScale());\r\n    } else if (event.deltaY > 0) {\r\n      dollyIn(getZoomScale());\r\n    }\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleKeyDown(event) {\r\n    // console.log( 'handleKeyDown' );\r\n    var needsUpdate = false;\r\n\r\n    switch (event.keyCode) {\r\n      case scope.keys.UP:\r\n        pan(0, scope.keyPanSpeed);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan(0, -scope.keyPanSpeed);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan(scope.keyPanSpeed, 0);\r\n        needsUpdate = true;\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan(-scope.keyPanSpeed, 0);\r\n        needsUpdate = true;\r\n        break;\r\n    }\r\n\r\n    if (needsUpdate) {\r\n      // prevent the browser from scrolling on cursor keys\r\n      event.preventDefault();\r\n      scope.update();\r\n    }\r\n  }\r\n\r\n  function handleTouchStartRotate(event) {\r\n    //console.log( 'handleTouchStartRotate' );\r\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n\r\n  function handleTouchStartDollyPan(event) {\r\n    //console.log( 'handleTouchStartDollyPan' );\r\n    if (scope.enableZoom) {\r\n      var dx = event.touches[0].pageX; // - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY; // - event.touches[1].pageY;\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n      dollyStart.set(0, distance);\r\n    }\r\n\r\n    if (scope.enablePan) {\r\n      var x = 0.5 * (event.touches[0].pageX); // + event.touches[1].pageX);\r\n      var y = 0.5 * (event.touches[0].pageY); // + event.touches[1].pageY);\r\n      panStart.set(x, y);\r\n    }\r\n  }\r\n\r\n  function handleTouchMoveRotate(event) {\r\n    //console.log( 'handleTouchMoveRotate' );\r\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\r\n\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\r\n    rotateStart.copy(rotateEnd);\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchMoveDollyPan(event) {\r\n    //console.log( 'handleTouchMoveDollyPan' );\r\n    if (scope.enableZoom) {\r\n      var dx = event.touches[0].pageX; // - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY; // - event.touches[1].pageY;\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n      dollyEnd.set(0, distance);\r\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\r\n      dollyIn(dollyDelta.y);\r\n      dollyStart.copy(dollyEnd);\r\n    }\r\n\r\n    if (scope.enablePan) {\r\n      var x = 0.5 * (event.touches[0].pageX); // + event.touches[1].pageX);\r\n      var y = 0.5 * (event.touches[0].pageY); // + event.touches[1].pageY);\r\n      panEnd.set(x, y);\r\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\r\n      pan(panDelta.x, panDelta.y);\r\n      panStart.copy(panEnd);\r\n    }\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchEnd(event) {} //console.log( 'handleTouchEnd' );\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n\r\n  function onMouseDown(event) {\r\n    if (scope.enabled === false) return; // Prevent the browser from scrolling.\r\n\r\n    event.preventDefault(); // Manually set the focus since calling preventDefault above\r\n    // prevents the browser from setting it automatically.\r\n\r\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n    switch (event.button) {\r\n      case scope.mouseButtons.LEFT:\r\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n          if (scope.enablePan === false) return;\r\n          handleMouseDownPan(event);\r\n          state = STATE.PAN;\r\n        } else {\r\n          if (scope.enableRotate === false) return;\r\n          handleMouseDownRotate(event);\r\n          state = STATE.ROTATE;\r\n        }\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.MIDDLE:\r\n        if (scope.enableZoom === false) return;\r\n        handleMouseDownDolly(event);\r\n        state = STATE.DOLLY;\r\n        break;\r\n\r\n      case scope.mouseButtons.RIGHT:\r\n        if (scope.enablePan === false) return;\r\n        handleMouseDownPan(event);\r\n        state = STATE.PAN;\r\n        break;\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n      document.addEventListener('mousemove', onMouseMove, false);\r\n      document.addEventListener('mouseup', onMouseUp, false);\r\n      scope.dispatchEvent(startEvent);\r\n    }\r\n  }\r\n\r\n  function onMouseMove(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n\r\n    switch (state) {\r\n      case STATE.ROTATE:\r\n        if (scope.enableRotate === false) return;\r\n        handleMouseMoveRotate(event);\r\n        break;\r\n\r\n      case STATE.DOLLY:\r\n        if (scope.enableZoom === false) return;\r\n        handleMouseMoveDolly(event);\r\n        break;\r\n\r\n      case STATE.PAN:\r\n        if (scope.enablePan === false) return;\r\n        handleMouseMovePan(event);\r\n        break;\r\n    }\r\n  }\r\n\r\n  function onMouseUp(event) {\r\n    if (scope.enabled === false) return;\r\n    handleMouseUp(event);\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n    scope.dispatchEvent(endEvent);\r\n    state = STATE.NONE;\r\n  }\r\n\r\n  function onMouseWheel(event) {\r\n    if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    scope.dispatchEvent(startEvent);\r\n    handleMouseWheel(event);\r\n    scope.dispatchEvent(endEvent);\r\n  }\r\n\r\n  function onKeyDown(event) {\r\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\r\n    handleKeyDown(event);\r\n  }\r\n\r\n  function onTouchStart(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n\r\n    switch (event.touches.length) {\r\n      case 2:\r\n        // two-fingered touch: rotate\r\n        if (scope.enableRotate === false) return;\r\n        handleTouchStartRotate(event);\r\n        state = STATE.TOUCH_ROTATE;\r\n        break;\r\n\r\n      case 1:\r\n        // one-fingered touch: dolly-pan\r\n        if (scope.enableZoom === false && scope.enablePan === false) return;\r\n        handleTouchStartDollyPan(event);\r\n        state = STATE.TOUCH_DOLLY_PAN;\r\n        break;\r\n\r\n      default:\r\n        state = STATE.NONE;\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n      scope.dispatchEvent(startEvent);\r\n    }\r\n  }\r\n\r\n  function onTouchMove(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch (event.touches.length) {\r\n      case 2:\r\n        // two-fingered touch: rotate\r\n        if (scope.enableRotate === false) return;\r\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\r\n\r\n        handleTouchMoveRotate(event);\r\n        break;\r\n\r\n      case 1:\r\n        // one-fingered touch: dolly-pan\r\n        if (scope.enableZoom === false && scope.enablePan === false) return;\r\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\r\n\r\n        handleTouchMoveDollyPan(event);\r\n        break;\r\n\r\n      default:\r\n        state = STATE.NONE;\r\n    }\r\n  }\r\n\r\n  function onTouchEnd(event) {\r\n    if (scope.enabled === false) return;\r\n    handleTouchEnd(event);\r\n    scope.dispatchEvent(endEvent);\r\n    state = STATE.NONE;\r\n  }\r\n\r\n  function onContextMenu(event) {\r\n    if (scope.enabled === false) return;\r\n    event.preventDefault();\r\n  } //\r\n\r\n\r\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\r\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\r\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\r\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\r\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\r\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\r\n  window.addEventListener('keydown', onKeyDown, false); // force an update at start\r\n\r\n  this.update();\r\n};\r\n\r\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\r\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\r\nObject.defineProperties(THREE.OrbitControls.prototype, {\r\n  center: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .center has been renamed to .target');\r\n      return this.target;\r\n    }\r\n  },\r\n  // backward compatibility\r\n  noZoom: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      return !this.enableZoom;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      this.enableZoom = !value;\r\n    }\r\n  },\r\n  noRotate: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      return !this.enableRotate;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      this.enableRotate = !value;\r\n    }\r\n  },\r\n  noPan: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      return !this.enablePan;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      this.enablePan = !value;\r\n    }\r\n  },\r\n  noKeys: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      return !this.enableKeys;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      this.enableKeys = !value;\r\n    }\r\n  },\r\n  staticMoving: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      return !this.enableDamping;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      this.enableDamping = !value;\r\n    }\r\n  },\r\n  dynamicDampingFactor: {\r\n    get: function () {\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      return this.dampingFactor;\r\n    },\r\n    set: function (value) {\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      this.dampingFactor = value;\r\n    }\r\n  }\r\n});\r\n/* three-orbitcontrols addendum */\r\n\r\nmodule.exports = exports.default = THREE.OrbitControls;","module.exports = __webpack_public_path__ + \"static/media/Windows for Building department breaking.eac7801f.fbx\";","const serverPath = 'https://socketio-testing.herokuapp.com';\r\nconst serverPort = 443;\r\n\r\nexport {\r\n  serverPath,\r\n  serverPort\r\n};"],"sourceRoot":""}